import"../chunks/NZTpNUN0.js";import"../chunks/Vvm9udaT.js";import{X as ie,l as E,_ as ce,aw as l,a2 as a,x as F,w as o,L as P,W as _e,a3 as t,a0 as f,Z as Fe}from"../chunks/DJxVeldX.js";import{e as d,s as m,r as Be}from"../chunks/C9woGF-z.js";import{b as w,a as y}from"../chunks/fOQuHGXh.js";import{i as z}from"../chunks/292SS5JT.js";import{b as te,r as Ke,s as ve}from"../chunks/CVCkp_ml.js";import{i as de}from"../chunks/Degfot_7.js";import{s as ue,a as Y}from"../chunks/ZTUH0_7J.js";import{o as ge,c as Se,a as De}from"../chunks/BB32ouRY.js";import{e as he}from"../chunks/DHri6rd4.js";import{b as ye}from"../chunks/BgFAjVCA.js";import{s as we}from"../chunks/BqlTOgs2.js";import{b as xe}from"../chunks/BCNfqvto.js";import{g as Ne}from"../chunks/knpjl46v.js";import{l as ae,b as Pe,c as ke}from"../chunks/CKOQZQXO.js";import{$ as be}from"../chunks/Bit4kGOU.js";import{C as We}from"../chunks/D7MgBCs2.js";import{I as A}from"../chunks/Cphc7EI3.js";import{a as qe}from"../chunks/BRDq7uV6.js";import{t as Ie,a as Oe}from"../chunks/CZB4GwcB.js";import{a as Re}from"../chunks/BXQQiVcS.js";var Xe=w('<div class="modal-overlay svelte-od9n8"><div class="modal-content svelte-od9n8"><button class="close-button svelte-od9n8"><!></button> <h2 class="svelte-od9n8"> </h2> <div class="search-options svelte-od9n8"><button> </button> <button> </button></div> <div class="search-input-wrapper svelte-od9n8"><input type="text" class="svelte-od9n8"/> <button class="search-button svelte-od9n8"><!></button></div></div></div>'),Ze=w("<button> </button>"),ze=w('<div class="center-message svelte-od9n8">Loading...</div>'),Ae=w('<div class="center-message svelte-od9n8"> </div>'),Ge=w('<div class="content svelte-od9n8"></div>'),Je=w('<div class="page-wrapper svelte-od9n8"><!> <div class="header-section svelte-od9n8"><div class="bubbles-wrapper svelte-od9n8"><div class="category-bubbles svelte-od9n8"><button> </button> <!></div></div> <button class="search-trigger-button svelte-od9n8"><!></button></div> <div class="hub-container svelte-od9n8"><!></div></div>');function Qe(G,W){ie(W,!1);const[q,J]=ue(),r=()=>Y(be,"$t",q),B=()=>Y(k,"$isLoading",q),x=()=>Y(c,"$contents",q);let c=_e([]),k=_e(!0),C=P(!1),p=P(""),u=P("name"),j=P(null);ge(async()=>{const e=await ae();c.set(e),k.set(!1)});async function M(e){f(j,e),k.set(!0);let s=[];e===null?s=await ae():s=await ke([e]),c.set(s),k.set(!1)}async function K(){k.set(!0),f(C,!1);let e=[];if(!o(p).trim())e=await ae();else if(o(u)==="name")e=await Pe(o(p));else if(o(u)==="tags"){const s=o(p).split(",").map(n=>n.trim()).filter(n=>n!=="");e=s.length>0?await ke(s):await ae()}c.set(e),k.set(!1)}function S(e){Ne(`/profile?c=${e.id}`)}de();var $=Je(),Z=a($);{var se=e=>{var s=Xe(),n=a(s),v=a(n),g=a(v);A(g,{icon:"mdi:close"}),t(v);var h=l(v,2),T=a(h,!0);t(h);var N=l(h,2),U=a(N);let fe;var $e=a(U,!0);t(U);var ee=l(U,2);let me;var Me=a(ee,!0);t(ee),t(N);var pe=l(N,2),V=a(pe);Ke(V);var le=l(V,2),Ce=a(le);A(Ce,{icon:"mdi:magnify"}),t(le),t(pe),t(n),t(s),E((X,je,Le,He,Te,Ee)=>{m(T,X),fe=te(U,1,"svelte-od9n8",null,fe,je),m($e,Le),me=te(ee,1,"svelte-od9n8",null,me,He),m(Me,Te),ve(V,"placeholder",Ee)},[()=>r()("contentHub.searchTitle"),()=>({active:o(u)==="name"}),()=>r()("contentHub.searchByName"),()=>({active:o(u)==="tags"}),()=>r()("contentHub.searchByTags"),()=>o(u)==="name"?r()("contentHub.searchNamePlaceholder"):r()("contentHub.searchTagsPlaceholder")],F),d("click",v,()=>f(C,!1)),d("click",U,()=>f(u,"name")),d("click",ee,()=>f(u,"tags")),ye(V,()=>o(p),X=>f(p,X)),d("keydown",V,X=>X.key==="Enter"&&K()),d("click",le,K),d("click",n,we(function(X){xe.call(this,W,X)})),d("click",s,()=>f(C,!1)),y(e,s)};z(Z,e=>{o(C)&&e(se)})}var Q=l(Z,2),i=a(Q),_=a(i),b=a(_);let D;var I=a(b,!0);t(b);var O=l(b,2);he(O,1,()=>qe,e=>e.id,(e,s)=>{var n=Ze();let v;var g=a(n,!0);t(n),E((h,T)=>{v=te(n,1,"bubble svelte-od9n8",null,v,h),m(g,T)},[()=>({active:o(j)===o(s).nameKey}),()=>r()(`${o(s).nameKey}`)],F),d("click",n,()=>M(o(s).nameKey)),y(e,n)}),t(_),t(i);var R=l(i,2),L=a(R);A(L,{icon:"mdi:magnify",width:"24",height:"24"}),t(R),t(Q);var H=l(Q,2),oe=a(H);{var re=e=>{var s=ze();y(e,s)},ne=(e,s)=>{{var n=g=>{var h=Ae(),T=a(h,!0);t(h),E(N=>m(T,N),[()=>r()("contentHub.noResults")],F),y(g,h)},v=g=>{var h=Ge();he(h,5,x,T=>T.id,(T,N)=>{We(T,{get content(){return o(N)},$$events:{click:()=>S(o(N))}})}),t(h),y(g,h)};z(e,g=>{x().length===0?g(n):g(v,!1)},s)}};z(oe,e=>{B()?e(re):e(ne,!1)})}t(H),t($),E((e,s)=>{D=te(b,1,"bubble svelte-od9n8",null,D,e),m(I,s)},[()=>({active:o(j)===null}),()=>r()("contentHub.all")],F),d("click",b,()=>M(null)),d("click",R,()=>f(C,!0)),y(G,$),ce(),J()}var Ue=w('<div class="success-message svelte-3jgyrs"><!> <h2> </h2> <p> </p></div>'),Ve=w("<span> </span>"),Ye=w("<span> </span>"),et=w('<div class="modal-content svelte-3jgyrs"><h2 class="modal-title svelte-3jgyrs"> </h2> <p class="modal-body svelte-3jgyrs"> <br/> </p> <textarea class="svelte-3jgyrs"></textarea> <button class="submit-button svelte-3jgyrs"><!></button></div>'),tt=w('<div class="modal-backdrop svelte-3jgyrs"><div class="modal-container svelte-3jgyrs"><button class="close-button svelte-3jgyrs" aria-label="닫기"><!></button> <!></div></div>');function at(G,W){ie(W,!1);const[q,J]=ue(),r=()=>Y(be,"$t",q),B=Se();let x=P(""),c=P(!1),k=P(!1);async function C(i){const _=await Re.post("/api/feedback",{text:i});if(!_.ok){const b=await _.json().catch(()=>({}));throw new Error(b.error||"Failed to submit feedback")}}async function p(){if(!(!o(x).trim()||o(c))){f(c,!0);try{await C(o(x)),f(k,!0),setTimeout(()=>{B("close")},1500)}catch(i){console.error("Feedback submission error:",i),alert(r()("feedbackModal.submitFailed")),f(c,!1)}}}function u(){o(c)||B("close")}function j(i){i.key==="Escape"&&u()}ge(()=>{window.addEventListener("keydown",j)}),De(()=>{window.removeEventListener("keydown",j)}),de();var M=tt(),K=a(M),S=a(K),$=a(S);A($,{icon:"ph:x-bold"}),t(S);var Z=l(S,2);{var se=i=>{var _=Ue(),b=a(_);A(b,{icon:"ph:check-circle-duotone"});var D=l(b,2),I=a(D,!0);t(D);var O=l(D,2),R=a(O,!0);t(O),t(_),E((L,H)=>{m(I,L),m(R,H)},[()=>r()("feedbackModal.thanks"),()=>r()("feedbackModal.thanksMessage")],F),y(i,_)},Q=i=>{var _=et(),b=a(_),D=a(b,!0);t(b);var I=l(b,2),O=a(I),R=l(O,2);t(I);var L=l(I,2);Be(L);var H=l(L,2),oe=a(H);{var re=e=>{var s=Ve(),n=a(s,!0);t(s),E(v=>m(n,v),[()=>r()("feedbackModal.sending")],F),y(e,s)},ne=e=>{var s=Ye(),n=a(s,!0);t(s),E(v=>m(n,v),[()=>r()("feedbackModal.send")],F),y(e,s)};z(oe,e=>{o(c)?e(re):e(ne,!1)})}t(H),t(_),E((e,s,n,v,g)=>{m(D,e),m(O,`${s??""} `),m(R,` ${n??""}`),ve(L,"placeholder",v),L.disabled=o(c),H.disabled=g},[()=>r()("feedbackModal.title"),()=>r()("feedbackModal.body1"),()=>r()("feedbackModal.body2"),()=>r()("feedbackModal.placeholder"),()=>o(c)||!o(x).trim()],F),ye(L,()=>o(x),e=>f(x,e)),d("click",H,p),y(i,_)};z(Z,i=>{o(k)?i(se):i(Q,!1)})}t(K),t(M),d("click",S,u),d("click",K,we(function(i){xe.call(this,W,i)})),d("click",M,u),Ie(3,M,()=>Oe),y(G,M),ce(),J()}var st=w('<main><div class="select-none"><!></div></main> <button class="feedback-fab svelte-b4pf0d"><!> <span> </span></button> <!>',1);function Ct(G,W){ie(W,!1);const[q,J]=ue(),r=()=>Y(be,"$t",q);let B=P(!1);de();var x=st(),c=Fe(x),k=a(c),C=a(k);Qe(C,{}),t(k),t(c);var p=l(c,2),u=a(p);A(u,{icon:"ph:paper-plane-tilt-bold"});var j=l(u,2),M=a(j,!0);t(j),t(p);var K=l(p,2);{var S=$=>{at($,{$$events:{close:()=>f(B,!1)}})};z(K,$=>{o(B)&&$(S)})}E(($,Z)=>{ve(p,"aria-label",$),m(M,Z)},[()=>r()("hub.feedbackButtonLabel"),()=>r()("hub.feedbackButtonText")],F),d("click",p,()=>f(B,!0)),y(G,x),ce(),J()}export{Ct as component};
