import"../chunks/NZTpNUN0.js";import"../chunks/Vvm9udaT.js";import{c as fe,o as pe,a as Oe}from"../chunks/BB32ouRY.js";import{X as Wt,a2 as e,a3 as t,aw as r,w as i,L as q,l as L,a0 as o,_ as Yt,Z as Qt,x as gt,u as J,au as ze,av as Fe,aA as Gt,g as ce}from"../chunks/DJxVeldX.js";import{s as v,e as f}from"../chunks/C9woGF-z.js";import{i as M}from"../chunks/292SS5JT.js";import{e as Ce,i as Ie}from"../chunks/DHri6rd4.js";import{b as g,a as _,c as Te}from"../chunks/fOQuHGXh.js";import{r as St,b as at,s as Q}from"../chunks/CVCkp_ml.js";import{b as Nt}from"../chunks/BgFAjVCA.js";import{i as te}from"../chunks/Degfot_7.js";import{s as ee,a as wt,b as jt}from"../chunks/ZTUH0_7J.js";import{P as De}from"../chunks/BRDq7uV6.js";import{g as ue}from"../chunks/knpjl46v.js";import{a as mt,b as Ue,l as Be}from"../chunks/BXQQiVcS.js";import{$ as ae,a as Ht}from"../chunks/Bit4kGOU.js";import{p as _e}from"../chunks/Zfh5ko2t.js";import{c as Ve}from"../chunks/htZiybrN.js";import{N as Je}from"../chunks/BCKTa4ba.js";import{N as Ke}from"../chunks/aRpSKKae.js";import{I as A}from"../chunks/Cphc7EI3.js";import{a as Xe}from"../chunks/BqlTOgs2.js";import{s as bt}from"../chunks/gt9WcTCj.js";const be="/api/live";async function Ze(){const j=await mt.get2(`${be}/list`);if(!j.ok)throw new Error("live.fetchListFailed");const k=await j.json();if(!Array.isArray(k))throw new Error("live.responseNotArray");return k}async function Ge(j,k){if(!(await mt.post(`${be}/set`,{personaId:j,isLive:k})).ok)throw new Error("live.setStatusFailed")}var He=g('<p class="error svelte-lquz3j"> </p>'),Qe=g('<div class="modal-backdrop svelte-lquz3j"><div class="modal svelte-lquz3j"><h2> </h2> <label>Starting Bid (Credits): <input type="number" min="1" class="svelte-lquz3j"/></label> <label>Duration (seconds): <input type="number" min="60" class="svelte-lquz3j"/></label> <!> <div class="buttons svelte-lquz3j"><button class="svelte-lquz3j">Create Auction</button> <button class="svelte-lquz3j">Cancel</button></div></div></div>');function We(j,k){Wt(k,!1);const[F,st]=ee(),c=()=>wt(ae,"$t",F);let b=_e(k,"persona",8);const C=fe();let n=q(100),x=q(300),p=q("");async function $(){try{await Ve(b().id,i(n),i(x)),C("close")}catch(m){o(p,m.message||c()("auctionModal.createFailed"))}}te();var R=Qe(),I=e(R),h=e(I),S=e(h);t(h);var P=r(h,2),K=r(e(P));St(K),t(P);var O=r(P,2),W=r(e(O));St(W),t(O);var E=r(O,2);{var it=m=>{var y=He(),U=e(y,!0);t(y),L(()=>v(U,i(p))),_(m,y)};M(E,m=>{i(p)&&m(it)})}var T=r(E,2),D=e(T),rt=r(D,2);t(T),t(I),t(R),L(()=>v(S,`Start Auction for ${b().name??""}`)),Nt(K,()=>i(n),m=>o(n,m)),Nt(W,()=>i(x),m=>o(x,m)),f("click",D,$),f("click",rt,()=>C("close")),_(j,R),Yt(),st()}var Ye=g('<div class="modal-backdrop svelte-o08un3"><div class="modal-content svelte-o08un3"><button class="close-button svelte-o08un3">&times;</button> <h2 class="svelte-o08un3"> </h2> <p class="description svelte-o08un3"> </p> <div class="setting-group svelte-o08un3"><label class="svelte-o08un3"> </label> <div class="button-group svelte-o08un3"><button> </button> <button> </button></div></div> <div class="setting-group svelte-o08un3"><label class="svelte-o08un3"> </label> <div class="button-group svelte-o08un3"><button><!> </button> <button><!> </button></div></div></div></div>');function ta(j,k){Wt(k,!1);const[F,st]=ee(),c=()=>wt(ae,"$t",F),b=()=>wt(bt,"$settings",F);let C=_e(k,"isOpen",12,!1);const n=fe();function x(){C(!1),n("close")}function p(h){C()&&h.key==="Escape"&&x()}pe(()=>{window.addEventListener("keydown",p)}),Oe(()=>{window.removeEventListener("keydown",p)}),te();var $=Te(),R=Qt($);{var I=h=>{var S=Ye(),P=e(S),K=e(P),O=r(K,2),W=e(O,!0);t(O);var E=r(O,2),it=e(E,!0);t(E);var T=r(E,2),D=e(T),rt=e(D,!0);t(D);var m=r(D,2),y=e(m);let U;var lt=e(y,!0);t(y);var X=r(y,2);let ht;var Rt=e(X,!0);t(X),t(m),t(T);var yt=r(T,2),Y=e(yt),Ot=e(Y,!0);t(Y);var tt=r(Y,2),z=e(tt);let nt;var qt=e(z);A(qt,{icon:"ph:sun-bold"});var zt=r(qt);t(z);var B=r(z,2);let kt;var xt=e(B);A(xt,{icon:"ph:moon-bold"});var Ft=r(xt);t(B),t(tt),t(yt),t(P),t(S),L((Ct,It,Tt,$t,ot,vt,Dt,Pt,Mt,At,Ut,dt)=>{v(W,Ct),v(it,It),v(rt,Tt),U=at(y,1,"svelte-o08un3",null,U,$t),v(lt,ot),ht=at(X,1,"svelte-o08un3",null,ht,vt),v(Rt,Dt),v(Ot,Pt),nt=at(z,1,"svelte-o08un3",null,nt,Mt),v(zt,` ${At??""}`),kt=at(B,1,"svelte-o08un3",null,kt,Ut),v(Ft,` ${dt??""}`)},[()=>c()("settingPageModal.title"),()=>c()("settingPageModal.description"),()=>c()("settingPageModal.language"),()=>({active:b().language==="ko"}),()=>c()("settingPageModal.korean"),()=>({active:b().language==="en"}),()=>c()("settingPageModal.english"),()=>c()("settingPageModal.theme"),()=>({active:b().theme==="light"}),()=>c()("settingPageModal.light"),()=>({active:b().theme==="dark"}),()=>c()("settingPageModal.dark")],gt),f("click",K,x),f("click",y,()=>jt(bt,J(b).language="ko",J(b))),f("click",X,()=>jt(bt,J(b).language="en",J(b))),f("click",z,()=>jt(bt,J(b).theme="light",J(b))),f("click",B,()=>jt(bt,J(b).theme="dark",J(b))),f("click",S,Xe(x)),_(h,S)};M(R,h=>{C()&&h(I)})}_(j,$),Yt(),st()}var ea=g('<button class="btn-icon settings-button svelte-sdvwfq"><!></button>'),aa=g('<p class="error svelte-sdvwfq"> </p>'),sa=g('<img alt="Profile" class="profile-avatar svelte-sdvwfq"/>'),ia=g('<div class="profile-avatar-placeholder svelte-sdvwfq"> </div>'),ra=g(' <span class="creator-name svelte-sdvwfq"> </span>',1),la=g('<span class="creator-name svelte-sdvwfq"> </span>'),na=g('<div class="name-display-wrapper svelte-sdvwfq"><h2 class="svelte-sdvwfq"><!></h2> <button class="btn-icon-edit svelte-sdvwfq" aria-label="Edit Profile"><!></button></div>'),oa=g('<input type="text" class="editing svelte-sdvwfq" placeholder="Nickname"/> <input type="text" class="editing svelte-sdvwfq"/>',1),va=g('<div class="profile-header-actions"><button class="btn-logout svelte-sdvwfq"><!></button></div>'),da=g('<div class="profile-header-actions"><button class="btn editing svelte-sdvwfq"><!></button> <button class="btn btn-primary editing svelte-sdvwfq"><!></button></div>'),ca=g('<div class="live-indicator svelte-sdvwfq">LIVE</div>'),ua=g('<div class="actions-group svelte-sdvwfq"><button><!></button> <button class="btn svelte-sdvwfq"><!></button></div>'),fa=g('<div class="persona-card svelte-sdvwfq"><div class="card-header svelte-sdvwfq"><img class="avatar-image svelte-sdvwfq"/> <!></div> <div class="card-body svelte-sdvwfq"><h3 class="svelte-sdvwfq"> </h3> <p class="persona-type svelte-sdvwfq"> </p></div> <div class="card-footer svelte-sdvwfq"><!> <div class="actions-group svelte-sdvwfq"><button class="btn svelte-sdvwfq"><!></button> <button><!></button></div></div></div>'),pa=g('<div class="page-container svelte-sdvwfq"><div style="display: flex; align-items: center; justify-content: space-between;"><div class="header svelte-sdvwfq"><h1 class="svelte-sdvwfq"> </h1></div> <!></div> <!> <div class="profile-section card svelte-sdvwfq"><div class="profile-header svelte-sdvwfq"><!> <div class="profile-info svelte-sdvwfq"><!></div> <!></div> <div class="profile-details svelte-sdvwfq"><div class="svelte-sdvwfq"><span class="label svelte-sdvwfq"> </span> <div style="display: flex; align-items: center;"><!> <span class="value svelte-sdvwfq"> </span></div></div> <div class="svelte-sdvwfq"><span class="label svelte-sdvwfq"> </span> <span class="value svelte-sdvwfq"> </span></div> <button class="btn btn-primary svelte-sdvwfq"> </button></div></div> <div class="section-header svelte-sdvwfq"><h2 class="svelte-sdvwfq"> </h2> <button class="btn btn-primary svelte-sdvwfq"> </button></div> <div class="personas-section svelte-sdvwfq"><div class="persona-grid svelte-sdvwfq"></div></div> <!> <!> <!></div>');function Ca(j,k){Wt(k,!1);const[F,st]=ee(),c=()=>wt(ae,"$t",F),b=()=>wt(Ht,"$locale",F),C=q();let n=q({id:"",name:"",credits:0,gender:"",plan:"",profile:"",email:"",state:"",data:{nickname:"",language:"",lastLoginAt:"",createdAt:"",hasReceivedFirstCreationReward:!1,lastLoginIP:""}}),x=q([]),p=q(""),$=q([]),R=q(!1),I=q(null),h=q(!1),S=null;pe(async()=>{try{const s=await Ue();s?(o(n,s),i(n).data||Gt(n,i(n).data={nickname:i(n).name,language:ce(Ht)||"",lastLoginAt:"",createdAt:"",hasReceivedFirstCreationReward:!1,lastLoginIP:""})):o(p,"Failed to load user : "+s.status);const a=await mt.get("/api/persona/user");a.ok?o(x,await a.json()):o(p,"Failed to load personas");const l=await Ze();o($,l.map(d=>d))}catch(s){o(p,"Error: "+s)}});function P(s){return i($).includes(s)}async function K(s){const a=P(s);await Ge(s,!a),o($,a?i($).filter(l=>l!==s):[...i($),s])}async function O(s){const a=s.visibility==="public"?"private":"public";try{const l=await mt.post("/api/persona/visibility",{personaId:s.id,visibility:a});if(l.ok){const d=i(x).map(u=>u.id===s.id?{...u,visibility:a}:u);o(x,d),o(p,"")}else{const d=await l.text();o(p,`Failed to update visibility: ${d}`)}}catch(l){o(p,"Error updating visibility: "+l)}}function W(s){o(I,s),o(R,!0)}let E=q(!1);function it(){o(E,!1)}function T(){S=JSON.parse(JSON.stringify(i(n))),o(h,!0)}function D(){S&&o(n,S),o(h,!1)}async function rt(){const s={name:i(n).name,nickname:i(n).data.nickname||"",language:ce(Ht)||"en"};try{const a=await mt.post("/api/user/edit",s);if(a.ok)o(h,!1),o(p,"");else{const l=await a.text();o(p,`Failed to update user settings: ${l}`)}}catch(a){o(p,"Error updating settings: "+a)}}let m=q(!1);ze(()=>i($),()=>{o(C,i($))}),Fe(),te();var y=pa(),U=e(y),lt=e(U),X=e(lt),ht=e(X,!0);t(X),t(lt);var Rt=r(lt,2);{var yt=s=>{var a=ea(),l=e(a);A(l,{icon:"ph:gear-six-bold",width:"32",height:"32"}),t(a),f("click",a,()=>o(m,!0)),_(s,a)};M(Rt,s=>{b()&&s(yt)})}t(U);var Y=r(U,2);{var Ot=s=>{var a=aa(),l=e(a,!0);t(a),L(()=>v(l,i(p))),_(s,a)};M(Y,s=>{i(p)&&s(Ot)})}var tt=r(Y,2),z=e(tt),nt=e(z);{var qt=s=>{var a=sa();L(()=>Q(a,"src",i(n).profile)),_(s,a)},zt=s=>{var a=ia(),l=e(a,!0);t(a),L(d=>v(l,d),[()=>i(n).name.charAt(0)],gt),_(s,a)};M(nt,s=>{i(n).profile?s(qt):s(zt,!1)})}var B=r(nt,2),kt=e(B);{var xt=s=>{var a=na(),l=e(a),d=e(l);{var u=N=>{var V=ra(),G=Qt(V,!0),Et=r(G),Lt=e(Et);t(Et),L(()=>{v(G,i(n).data.nickname),v(Lt,`@${i(n).name??""}`)}),_(N,V)},Z=N=>{var V=la(),G=e(V);t(V),L(()=>v(G,`@${i(n).name??""}`)),_(N,V)};M(d,N=>{i(n).data.nickname?N(u):N(Z,!1)})}t(l);var ct=r(l,2),ut=e(ct);A(ut,{icon:"ri:edit-line"}),t(ct),t(a),f("click",ct,T),_(s,a)},Ft=s=>{var a=oa(),l=Qt(a);St(l);var d=r(l,2);St(d),Nt(l,()=>i(n).data.nickname,u=>Gt(n,i(n).data.nickname=u)),Nt(d,()=>i(n).name,u=>Gt(n,i(n).name=u)),_(s,a)};M(kt,s=>{i(h)?s(Ft,!1):s(xt)})}t(B);var Ct=r(B,2);{var It=s=>{var a=va(),l=e(a),d=e(l);A(d,{icon:"tabler:logout",width:"16",height:"16"}),t(l),t(a),f("click",l,function(...u){Be?.apply(this,u)}),_(s,a)},Tt=s=>{var a=da(),l=e(a),d=e(l);A(d,{icon:"ri:close-line"}),t(l);var u=r(l,2),Z=e(u);A(Z,{icon:"ri:check-line"}),t(u),t(a),f("click",l,D),f("click",u,rt),_(s,a)};M(Ct,s=>{i(h)?s(Tt,!1):s(It)})}t(z);var $t=r(z,2),ot=e($t),vt=e(ot),Dt=e(vt,!0);t(vt);var Pt=r(vt,2),Mt=e(Pt);Ke(Mt,{size:24,color:"#a0a0a0"});var At=r(Mt,2),Ut=e(At,!0);t(At),t(Pt),t(ot);var dt=r(ot,2),Bt=e(dt),ge=e(Bt,!0);t(Bt);var se=r(Bt,2),me=e(se,!0);t(se),t(dt);var Vt=r(dt,2),we=e(Vt,!0);t(Vt),t($t),t(tt);var Jt=r(tt,2),Kt=e(Jt),he=e(Kt,!0);t(Kt);var Xt=r(Kt,2),ye=e(Xt,!0);t(Xt),t(Jt);var Zt=r(Jt,2),ie=e(Zt);Ce(ie,5,()=>i(x),Ie,(s,a)=>{var l=fa(),d=e(l),u=e(d),Z=r(u,2);{var ct=w=>{var H=ca();_(w,H)};M(Z,w=>{P(i(a).id)&&w(ct)})}t(d);var ut=r(d,2),N=e(ut),V=e(N,!0);t(N);var G=r(N,2),Et=e(G);t(G),t(ut);var Lt=r(ut,2),ne=e(Lt);{var xe=w=>{var H=ua(),et=e(H);let de;var Ee=e(et);A(Ee,{icon:"mdi:broadcast"}),t(et);var _t=r(et,2),Le=e(_t);A(Le,{icon:"ri:auction-fill"}),t(_t),t(H),L((je,Se,Ne,Re)=>{de=at(et,1,"btn btn-toggle svelte-sdvwfq",null,de,je),Q(et,"aria-label",Se),_t.disabled=Ne,Q(_t,"aria-label",Re)},[()=>({active:P(i(a).id)}),()=>P(i(a).id)?c()("settingPage.broadcastEnd"):c()("settingPage.broadcastStart"),()=>P(i(a).id),()=>c()("settingPage.auctionStart")],gt),f("click",et,()=>K(i(a).id)),f("click",_t,()=>W(i(a))),_(w,H)};M(ne,w=>{i(a).personaType==="3D"&&w(xe)})}var oe=r(ne,2),ft=e(oe),$e=e(ft);A($e,{icon:"ri:edit-line"}),t(ft);var pt=r(ft,2);let ve;var Pe=e(pt);{var Me=w=>{A(w,{icon:"ph:eye-bold"})},Ae=w=>{A(w,{icon:"ph:eye-slash-bold"})};M(Pe,w=>{i(a).visibility==="public"?w(Me):w(Ae,!1)})}t(pt),t(oe),t(Lt),t(l),L((w,H)=>{Q(u,"src",`${De}${i(a).owner_id[0]}/${i(a).id}.portrait`),Q(u,"alt",i(a).name),v(V,i(a).name),v(Et,`${i(a).personaType??""} Type`),Q(ft,"aria-label",w),ve=at(pt,1,"btn svelte-sdvwfq",null,ve,H),Q(pt,"aria-label",i(a).visibility==="public"?"캐릭터를 비공개로 전환":"캐릭터를 공개로 전환")},[()=>c()("settingPage.edit"),()=>({public:i(a).visibility==="public"})],gt),f("click",ft,()=>ue(`/edit?c=${i(a).id}`)),f("click",pt,()=>O(i(a))),_(s,l)}),t(ie),t(Zt);var re=r(Zt,2);{var qe=s=>{We(s,{get persona(){return i(I)},$$events:{close:()=>o(R,!1)}})};M(re,s=>{i(R)&&i(I)&&s(qe)})}var le=r(re,2);Je(le,{isNeedNeurons:!1,get isOpen(){return i(E)},set isOpen(s){o(E,s)},$$events:{close:it},$$legacy:!0});var ke=r(le,2);ta(ke,{get isOpen(){return i(m)},set isOpen(s){o(m,s)},$$legacy:!0}),t(y),L((s,a,l,d,u,Z)=>{v(ht,s),v(Dt,a),v(Ut,i(n).credits),v(ge,l),v(me,i(n).plan),v(we,d),v(he,u),v(ye,Z)},[()=>c()("settingPage.title"),()=>c()("settingPage.credits"),()=>c()("settingPage.plan"),()=>c()("settingPage.charge"),()=>c()("settingPage.myPersonas"),()=>c()("settingPage.newPersona")],gt),f("click",Vt,()=>o(E,!0)),f("click",Xt,()=>ue("/edit")),_(j,y),Yt(),st()}export{Ca as component};
