import"../chunks/NZTpNUN0.js";import"../chunks/Vvm9udaT.js";import{X as je,l as I,_ as Ee,aw as m,a2 as a,x as j,a3 as o,w as e,L as R,Z as Me,e as X,a0 as i,aA as N,ay as Re}from"../chunks/DJxVeldX.js";import{s as S,e as A}from"../chunks/C9woGF-z.js";import{b as k,a as q}from"../chunks/fOQuHGXh.js";import{i as E}from"../chunks/292SS5JT.js";import{k as Te}from"../chunks/sCNk0_De.js";import{h as $e}from"../chunks/C01I-Qaa.js";import{a as Z}from"../chunks/b1Xy42mh.js";import{s as C,r as F}from"../chunks/CVCkp_ml.js";import{t as T,f as oe,a as K}from"../chunks/CZB4GwcB.js";import{b as Q}from"../chunks/BgFAjVCA.js";import{i as Be}from"../chunks/Degfot_7.js";import{a as Ne,s as Pe}from"../chunks/ZTUH0_7J.js";import{g as ze}from"../chunks/knpjl46v.js";import{c as ie}from"../chunks/Ccw7PXcW.js";import{I as ne}from"../chunks/Cphc7EI3.js";import{$ as De}from"../chunks/Bit4kGOU.js";import{A as Ge}from"../chunks/BRDq7uV6.js";/* empty css                */var He=k('<div class="content-box svelte-13sqf71"><h1 class="prompt-title svelte-13sqf71"> </h1> <p class="prompt-subtitle svelte-13sqf71"> </p> <button class="final-button svelte-13sqf71"> </button></div>'),Je=k('<div class="content-box svelte-13sqf71"><div class="spinner svelte-13sqf71"></div> <p class="prompt-subtitle svelte-13sqf71"> </p></div>'),Ue=k('<input class="step-input svelte-13sqf71" type="password"/> <input class="step-input svelte-13sqf71" type="password"/>',1),Ve=k('<input class="step-input svelte-13sqf71"/>'),Xe=k('<div class="gender-selection svelte-13sqf71"><button class="gender-button svelte-13sqf71"><!></button> <button class="gender-button svelte-13sqf71"><!></button> <button class="gender-button svelte-13sqf71"><!></button></div>'),Ze=k('<button class="next-button svelte-13sqf71"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-13sqf71"><path d="M5 12h14" class="svelte-13sqf71"></path><path d="m12 5 7 7-7 7" class="svelte-13sqf71"></path></svg></button>'),Fe=k('<div class="svelte-13sqf71"><h1 class="prompt-title svelte-13sqf71"> </h1> <!> <!></div>'),Ke=k('<div class="content-box svelte-13sqf71"><!></div>'),Qe=k('<div class="error-message svelte-13sqf71"> </div>'),We=k('<div class="page-wrapper svelte-13sqf71"><div class="flow-container svelte-13sqf71"><a href="/" class="logo-link svelte-13sqf71"><img src="/logo.png" class="logo svelte-13sqf71"/></a> <main class="flow-content svelte-13sqf71"><!></main> <footer class="flow-footer svelte-13sqf71"><!> <div class="extra-links svelte-13sqf71"><span class="svelte-13sqf71"> </span> <a href="/login" class="svelte-13sqf71"> </a></div></footer></div></div>');function Ye(P,le){je(le,!1);const[ve,ce]=Pe(),s=()=>Ne(De,"$t",ve),pe='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z"></path><path d="m15 9-6 6"></path><path d="m9 9 6 6"></path></svg>';let n=R("email");const w=R({email:"",password:"",username:"",gender:""});let p=R(""),$=R(""),u=R("");function W(t){t.focus()}function fe(t,l){const{speed:g=40}={},L=t.textContent||"";t.textContent="";let c=0;const f=setInterval(()=>{c<L.length?(t.textContent+=L[c],c++):clearInterval(f)},g);return{destroy(){clearInterval(f)}}}const de={email:s()("register.prompt.email"),username:s()("register.prompt.username"),password:s()("register.prompt.password"),gender:s()("register.prompt.gender")};async function z(){switch(i(u,""),e(n)){case"email":if(!e(p)){i(u,s()("register.error.emailRequired"));return}if(!/^\S+@\S+\.\S+$/.test(e(p))){i(u,s()("register.error.emailInvalid"));return}N(w,e(w).email=e(p)),i(n,"username");break;case"username":if(!e(p)){i(u,s()("register.error.usernameRequired"));return}N(w,e(w).username=e(p)),i(n,"password");break;case"password":if(e(p).length<8){i(u,s()("register.error.passwordLength"));return}if(e(p)!==e($)){i(u,s()("register.error.passwordMismatch"));return}N(w,e(w).password=e(p)),i(n,"gender");break}i(p,""),i($,""),await Re();const t=document.querySelector(".step-input");t&&t.focus()}async function D(t){N(w,e(w).gender=t),i(n,"submitting"),await me()}async function me(){i(u,"");try{const t=await fetch(`${Ge}/api/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e(w))}),l=await t.json();t.ok?i(n,"success"):(i(u,l.error||s()("register.error.generic")),i(n,"email"))}catch{i(u,s()("register.error.network")),i(n,"email")}finally{}}Be();var G=We(),Y=a(G),H=a(Y),ue=a(H);o(H);var J=m(H,2),ge=a(J);{var he=t=>{var l=He(),g=a(l),L=a(g);o(g);var c=m(g,2),f=a(c,!0);o(c);var y=m(c,2),M=a(y,!0);o(y),o(l),I((x,O,V)=>{S(L,`ðŸŽ‰ ${x??""}`),S(f,O),S(M,V)},[()=>s()("register.success.title"),()=>s()("register.success.message",{values:{email:e(w).email}}),()=>s()("register.success.backToLogin")],j),A("click",y,()=>ze("/login")),T(1,l,()=>oe,()=>({y:20,duration:400,easing:ie})),q(t,l)},_e=(t,l)=>{{var g=c=>{var f=Je(),y=m(a(f),2),M=a(y,!0);o(y),o(f),I(x=>S(M,x),[()=>s()("register.button.loading")],j),T(1,f,()=>K),q(c,f)},L=c=>{var f=Ke(),y=a(f);Te(y,()=>e(n),M=>{var x=Fe(),O=a(x),V=a(O,!0);o(O),Z(O,v=>fe?.(v));var ae=m(O,2);{var ke=v=>{var h=Ue(),d=Me(h);F(d),X(()=>Q(d,()=>e(p),r=>i(p,r))),Z(d,r=>W?.(r));var b=m(d,2);F(b),I((r,_)=>{C(d,"placeholder",r),C(b,"placeholder",_)},[()=>s()("register.placeholder.password"),()=>s()("register.placeholder.passwordConfirm")],j),Q(b,()=>e($),r=>i($,r)),A("keydown",b,r=>r.key==="Enter"&&z()),q(v,h)},xe=(v,h)=>{{var d=b=>{var r=Ve();F(r),X(()=>Q(r,()=>e(p),_=>i(p,_))),Z(r,_=>W?.(_)),X(()=>A("keydown",r,_=>_.key==="Enter"&&z())),I(_=>{C(r,"type",e(n)==="email"?"email":"text"),C(r,"placeholder",_)},[()=>s()(`register.placeholder.${e(n)}`)],j),q(b,r)};E(v,b=>{e(n)!=="gender"&&b(d)},h)}};E(ae,v=>{e(n)==="password"?v(ke):v(xe,!1)})}var ye=m(ae,2);{var Ie=v=>{var h=Xe(),d=a(h),b=a(d);ne(b,{icon:"mdi:gender-male",width:"48",height:"48"}),o(d);var r=m(d,2),_=a(r);ne(_,{icon:"mdi:gender-female",width:"48",height:"48"}),o(r);var B=m(r,2),Ce=a(B);$e(Ce,()=>pe),o(B),o(h),I((Ae,Le,Oe)=>{C(d,"title",Ae),C(r,"title",Le),C(B,"title",Oe)},[()=>s()("register.gender.male"),()=>s()("register.gender.female"),()=>s()("register.gender.other")],j),A("click",d,()=>D("male")),A("click",r,()=>D("female")),A("click",B,()=>D("other")),q(v,h)},Se=v=>{var h=Ze();A("click",h,z),q(v,h)};E(ye,v=>{e(n)==="gender"?v(Ie):v(Se,!1)})}o(x),I(()=>S(V,de[e(n)])),T(1,x,()=>oe,()=>({y:30,duration:400,easing:ie})),T(2,x,()=>K,()=>({duration:150})),q(M,x)}),o(f),q(c,f)};E(t,c=>{e(n)==="submitting"?c(g):c(L,!1)},l)}};E(ge,t=>{e(n)==="success"?t(he):t(_e,!1)})}o(J);var ee=m(J,2),te=a(ee);{var we=t=>{var l=Qe(),g=a(l,!0);o(l),I(()=>S(g,e(u))),T(1,l,()=>K),q(t,l)};E(te,t=>{e(u)&&t(we)})}var se=m(te,2),U=a(se),be=a(U,!0);o(U);var re=m(U,2),qe=a(re,!0);o(re),o(se),o(ee),o(Y),o(G),I((t,l,g)=>{C(ue,"alt",t),S(be,l),S(qe,g)},[()=>s()("login.serviceLogoAlt"),()=>s()("register.alreadyHaveAccount"),()=>s()("register.goToLogin")],j),q(P,G),Ee(),ce()}function bt(P){Ye(P,{})}export{bt as component};
