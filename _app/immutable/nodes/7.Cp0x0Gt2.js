import"../chunks/NZTpNUN0.js";import"../chunks/Vvm9udaT.js";import{o as $t}from"../chunks/BB32ouRY.js";import{X as zt,au as kt,av as xt,_ as wt,W as z,a0 as yt,L as Ct,a2 as a,a3 as t,l as S,Z as Lt,aw as l,w as E,x as Pt}from"../chunks/DJxVeldX.js";import{s as c,e as I}from"../chunks/C9woGF-z.js";import{i as q}from"../chunks/292SS5JT.js";import{e as Bt}from"../chunks/DHri6rd4.js";import{b as x,a as k}from"../chunks/fOQuHGXh.js";import{s as T,b as F}from"../chunks/CVCkp_ml.js";import{i as Ot}from"../chunks/Degfot_7.js";import{s as jt,a as d}from"../chunks/ZTUH0_7J.js";import{p as At}from"../chunks/pmDB9vb6.js";import{C as Dt}from"../chunks/D7MgBCs2.js";import{$ as Et}from"../chunks/Bit4kGOU.js";import{a as It}from"../chunks/BXQQiVcS.js";import{g as qt}from"../chunks/knpjl46v.js";var Ft=x('<div class="center-message svelte-1smdzbv">Loading creator profile...</div>'),Mt=x('<div class="center-message error svelte-1smdzbv"> </div>'),Nt=x('<div class="creator-header svelte-1smdzbv"><div class="creator-info svelte-1smdzbv"><img class="creator-portrait svelte-1smdzbv"/> <div class="creator-details"><h1 class="creator-name svelte-1smdzbv"> </h1> <p class="creator-persona-count svelte-1smdzbv"> </p></div></div> <button class="follow-button svelte-1smdzbv"> </button></div> <div class="hub-container svelte-1smdzbv"><div class="sort-controls svelte-1smdzbv"><button> </button> <button> </button> <button> </button></div> <div class="content-grid svelte-1smdzbv"></div></div>',1),Rt=x('<div class="page-wrapper svelte-1smdzbv"><!></div>');function ae(V,Y){zt(Y,!1);const[n,tt]=jt(),et=()=>d(At,"$page",n),s=()=>d(R,"$profile",n),m=()=>d(g,"$sortOrder",n),rt=()=>d(w,"$isLoading",n),M=()=>d(y,"$error",n),f=()=>d(Et,"$t",n),N=Ct();let R=z(null),w=z(!0),y=z(null),g=z("likes");$t(async()=>{const e=et().url.searchParams.get("c");if(!e){y.set("Creator ID not found in URL."),w.set(!1);return}try{const r=await It.get2(`/api/creator/info?id=${e}`);if(!r.ok){const i=await r.json();throw new Error(i.error||"Failed to load creator profile.")}const o=await r.json();R.set(o)}catch(r){y.set(r.message)}finally{w.set(!1)}});function at(e){qt(`/profile?c=${e.id}`)}kt(()=>(s(),m()),()=>{yt(N,(()=>{if(!s())return[];const e=[...s().personas],r=m();return e.sort((o,i)=>r==="likes"?i.likes_count-o.likes_count:r==="chats"?i.chat_count-o.chat_count:r==="name"?o.name.localeCompare(i.name):0)})())}),xt(),Ot();var C=Rt(),st=a(C);{var ot=e=>{var r=Ft();k(e,r)},it=(e,r)=>{{var o=v=>{var p=Mt(),L=a(p);t(p),S(()=>c(L,`Error: ${M()??""}`)),k(v,p)},i=(v,p)=>{{var L=P=>{var U=Nt(),B=Lt(U),O=a(B),j=a(O),W=l(j,2),A=a(W),lt=a(A,!0);t(A);var X=l(A,2),ct=a(X);t(X),t(W),t(O);var Z=l(O,2),nt=a(Z,!0);t(Z),t(B);var G=l(B,2),D=a(G),u=a(D);let H;var vt=a(u,!0);t(u);var _=l(u,2);let J;var dt=a(_,!0);t(_);var h=l(_,2);let K;var mt=a(h,!0);t(h),t(D);var Q=l(D,2);Bt(Q,5,()=>E(N),b=>b.id,(b,$)=>{Dt(b,{get content(){return E($)},isLive:()=>!1,isAuctioning:()=>!1,$$events:{click:()=>at(E($))}})}),t(Q),t(G),S((b,$,ft,pt,ut,_t,bt,gt,ht)=>{T(j,"src",b),T(j,"alt",s().creator.name),c(lt,s().creator.name),c(ct,`${s().personas.length??""}
                        ${$??""}`),c(nt,ft),H=F(u,1,"svelte-1smdzbv",null,H,pt),c(vt,ut),J=F(_,1,"svelte-1smdzbv",null,J,_t),c(dt,bt),K=F(h,1,"svelte-1smdzbv",null,K,gt),c(mt,ht)},[()=>s().creator.portrait_url||"https://placehold.co/128x128/1a1a1a/ffffff?text="+s().creator.name.charAt(0),()=>f()("creatorPage.personas"),()=>f()("creatorPage.follow"),()=>({active:m()==="likes"}),()=>f()("creatorPage.sortByLikes"),()=>({active:m()==="chats"}),()=>f()("creatorPage.sortByChats"),()=>({active:m()==="name"}),()=>f()("creatorPage.sortByName")],Pt),I("click",u,()=>g.set("likes")),I("click",_,()=>g.set("chats")),I("click",h,()=>g.set("name")),k(P,U)};q(v,P=>{s()&&P(L)},p)}};q(e,v=>{M()?v(o):v(i,!1)},r)}};q(st,e=>{rt()?e(ot):e(it,!1)})}t(C),k(V,C),wt(),tt()}export{ae as component};
