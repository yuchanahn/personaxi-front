import{d as I,b as D}from"../chunks/kz80bbCR.js";import{i as V}from"../chunks/2r1cYJse.js";import{o as W,a as j}from"../chunks/D0mpzbhj.js";import{w as q,aj as z,z as E,al as o,ap as c,O,Q as _,W as Q,V as R,am as i}from"../chunks/BUDlkbfV.js";import{s as A}from"../chunks/BbnaKca8.js";import{b as F}from"../chunks/CAWQASXy.js";import{b as G}from"../chunks/CGc6l0L7.js";import{a as b,s as H}from"../chunks/D32zTIdM.js";import{B as J,a as K,s as L,c as N}from"../chunks/DB9-tYX_.js";import{t as T}from"../chunks/CY9TbF48.js";import{w as U}from"../chunks/e6l8DgL1.js";import{l as X}from"../chunks/Caezn3U5.js";import{p as Y}from"../chunks/dMfnY97A.js";import{$ as Z}from"../chunks/C36u96xB.js";var ee=I('<div id="broadcast-layout" class="svelte-1wv0lui"><canvas class="vrm-canvas svelte-1wv0lui"></canvas> <div class="sidebar svelte-1wv0lui"><div class="persona-header svelte-1wv0lui"><h2> </h2></div> <!> <!></div></div>');function fe(P,d){q(d,!1);const[p,$]=H(),a=()=>b(Z,"$t",p),M=()=>b(Y,"$page",p);let s=null,n=Q(),l=null,g=null;s={name:"test"};const t=U([]);t.set([{user:a()("livePage.viewer1"),msg:a()("livePage.viewer1Message")},{user:a()("livePage.viewer2"),msg:a()("livePage.viewer2Message")},{user:a()("livePage.viewer3"),msg:a()("livePage.viewer3Message")}]),W(async()=>{const e=M().url.searchParams.get("c");if(e!==g&&(g=e,e&&(s=await X(e))),!!s){l=N(s.id,r=>{let k=r;t.update(x=>[...x,{user:a()("livePage.me"),msg:k.msg}])});try{s&&T(_(n),s).then(r=>void 0).finally()}catch(r){console.error("Error loading VRM:",r)}}}),j(()=>{l&&(console.log(a()("livePage.websocketDisconnected")),l.close())});function y(e){L(e)}V();var v=ee(),f=o(v);G(f,e=>R(n,e),()=>_(n));var u=c(f,2),m=o(u),w=o(m),B=o(w,!0);i(w),i(m);var h=c(m,2);J(h,{get messages(){return t}});var C=c(h,2);K(C,{onSend:y}),i(u),i(v),z(e=>A(B,e),[()=>a()("livePage.broadcastContent")],O),D(P,v),F(d,"broadcastMessages",t);var S=E({broadcastMessages:t});return $(),S}export{fe as component};
