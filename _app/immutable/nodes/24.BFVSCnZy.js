import"../chunks/NZTpNUN0.js";import"../chunks/Vvm9udaT.js";import{o as G}from"../chunks/BB32ouRY.js";import{X as H,L as E,_ as J,aw as v,a2 as a,a0 as p,w as d,a3 as s,l as x,x as P}from"../chunks/DJxVeldX.js";import{s as l}from"../chunks/C9woGF-z.js";import{i as b}from"../chunks/292SS5JT.js";import{b as h,a as u}from"../chunks/fOQuHGXh.js";import{i as K}from"../chunks/Degfot_7.js";import{a as I,s as N}from"../chunks/ZTUH0_7J.js";import{p as O}from"../chunks/pmDB9vb6.js";import{g as Q}from"../chunks/knpjl46v.js";import{a as R}from"../chunks/BXQQiVcS.js";import{I as k}from"../chunks/Cphc7EI3.js";import{$ as S}from"../chunks/Bit4kGOU.js";var U=h('<div class="card svelte-1tteirc"><!> <h1 class="svelte-1tteirc"> </h1> <p class="svelte-1tteirc"> </p></div>'),V=h('<div class="card svelte-1tteirc"><!> <h1 class="svelte-1tteirc"> </h1> <p class="svelte-1tteirc"> </p></div>'),W=h('<div class="card svelte-1tteirc"><!> <h1 class="svelte-1tteirc"> </h1> <p class="svelte-1tteirc"> </p> <a href="/login" class="button svelte-1tteirc"> </a></div>'),Y=h('<div class="container svelte-1tteirc"><!> <!> <!></div>');function me(L,j){H(j,!1);const[w,q]=N(),i=()=>I(S,"$t",w),A=()=>I(O,"$page",w);let n=E("verifying"),y=E(i()("verifyPage.invalidAccess"));G(async()=>{const r=A().url.searchParams.get("token");if(!r){p(n,"error");return}try{const e=await R.get2(`/api/auth/email?t=${r}`);if(e.ok)p(n,"success"),setTimeout(()=>{Q("/login?verified=true")},3e3);else{const o=await e.json();p(y,o.error||i()("verifyPage.unknownError")),p(n,"error")}}catch{p(y,i()("verifyPage.connectionError")),p(n,"error")}}),K();var $=Y(),T=a($);{var D=r=>{var e=U(),o=a(e);k(o,{icon:"line-md:loading-twotone-loop",class:"icon verifying"});var t=v(o,2),m=a(t,!0);s(t);var c=v(t,2),g=a(c,!0);s(c),s(e),x((f,_)=>{l(m,f),l(g,_)},[()=>i()("verifyPage.verifyingTitle"),()=>i()("verifyPage.verifyingMessage")],P),u(r,e)};b(T,r=>{d(n)==="verifying"&&r(D)})}var M=v(T,2);{var X=r=>{var e=V(),o=a(e);k(o,{icon:"line-md:confirm-circle",class:"icon success"});var t=v(o,2),m=a(t,!0);s(t);var c=v(t,2),g=a(c,!0);s(c),s(e),x((f,_)=>{l(m,f),l(g,_)},[()=>i()("verifyPage.successTitle"),()=>i()("verifyPage.successMessage")],P),u(r,e)};b(M,r=>{d(n)==="success"&&r(X)})}var z=v(M,2);{var B=r=>{var e=W(),o=a(e);k(o,{icon:"line-md:close-circle",class:"icon error"});var t=v(o,2),m=a(t,!0);s(t);var c=v(t,2),g=a(c,!0);s(c);var f=v(c,2),_=a(f,!0);s(f),s(e),x((C,F)=>{l(m,C),l(g,d(y)),l(_,F)},[()=>i()("verifyPage.errorTitle"),()=>i()("verifyPage.backToLogin")],P),u(r,e)};b(z,r=>{d(n)==="error"&&r(B)})}s($),u(L,$),J(),q()}export{me as component};
