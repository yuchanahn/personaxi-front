import{d as h,b as _}from"../chunks/kz80bbCR.js";import{i as B}from"../chunks/2r1cYJse.js";import{o as C}from"../chunks/D0mpzbhj.js";import{w as F,W as j,z as G,ap as v,al as a,V as p,Q as u,am as s,aj as P,O as x}from"../chunks/BUDlkbfV.js";import{s as l}from"../chunks/BbnaKca8.js";import{i as b}from"../chunks/28pso2Hb.js";import{a as E,s as H}from"../chunks/D32zTIdM.js";import{p as J}from"../chunks/dMfnY97A.js";import{g as K}from"../chunks/DqiWXVxP.js";import{a as N}from"../chunks/E07TNQLR.js";import{I as k}from"../chunks/DaDtKPX8.js";import{$ as R}from"../chunks/C36u96xB.js";var S=h('<div class="card svelte-1tteirc"><!> <h1 class="svelte-1tteirc"> </h1> <p class="svelte-1tteirc"> </p></div>'),U=h('<div class="card svelte-1tteirc"><!> <h1 class="svelte-1tteirc"> </h1> <p class="svelte-1tteirc"> </p></div>'),X=h('<div class="card svelte-1tteirc"><!> <h1 class="svelte-1tteirc"> </h1> <p class="svelte-1tteirc"> </p> <a href="/login" class="button svelte-1tteirc"> </a></div>'),Y=h('<div class="container svelte-1tteirc"><!> <!> <!></div>');function fe(I,q){F(q,!1);const[w,z]=H(),i=()=>E(R,"$t",w),A=()=>E(J,"$page",w);let n=j("verifying"),y=j(i()("verifyPage.invalidAccess"));C(async()=>{const r=A().url.searchParams.get("token");if(!r){p(n,"error");return}try{const e=await N.get2(`/api/auth/email?t=${r}`);if(e.ok)p(n,"success"),setTimeout(()=>{K("/login?verified=true")},3e3);else{const o=await e.json();p(y,o.error||i()("verifyPage.unknownError")),p(n,"error")}}catch{p(y,i()("verifyPage.connectionError")),p(n,"error")}}),B();var $=Y(),T=a($);{var D=r=>{var e=S(),o=a(e);k(o,{icon:"line-md:loading-twotone-loop",class:"icon verifying"});var t=v(o,2),m=a(t,!0);s(t);var c=v(t,2),d=a(c,!0);s(c),s(e),P((f,g)=>{l(m,f),l(d,g)},[()=>i()("verifyPage.verifyingTitle"),()=>i()("verifyPage.verifyingMessage")],x),_(r,e)};b(T,r=>{u(n)==="verifying"&&r(D)})}var M=v(T,2);{var L=r=>{var e=U(),o=a(e);k(o,{icon:"line-md:confirm-circle",class:"icon success"});var t=v(o,2),m=a(t,!0);s(t);var c=v(t,2),d=a(c,!0);s(c),s(e),P((f,g)=>{l(m,f),l(d,g)},[()=>i()("verifyPage.successTitle"),()=>i()("verifyPage.successMessage")],x),_(r,e)};b(M,r=>{u(n)==="success"&&r(L)})}var O=v(M,2);{var Q=r=>{var e=X(),o=a(e);k(o,{icon:"line-md:close-circle",class:"icon error"});var t=v(o,2),m=a(t,!0);s(t);var c=v(t,2),d=a(c,!0);s(c);var f=v(c,2),g=a(f,!0);s(f),s(e),P((V,W)=>{l(m,V),l(d,u(y)),l(g,W)},[()=>i()("verifyPage.errorTitle"),()=>i()("verifyPage.backToLogin")],x),_(r,e)};b(O,r=>{u(n)==="error"&&r(Q)})}s($),_(I,$),G(),z()}export{fe as component};
