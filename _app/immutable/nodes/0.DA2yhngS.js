import{d as y,b as d,e as Xe,t as He}from"../chunks/kz80bbCR.js";import{i as Le}from"../chunks/2r1cYJse.js";import{o as ot,c as Yt,a as Xt}from"../chunks/D0mpzbhj.js";import{w as Oe,Q as e,am as t,z as Re,V as h,W as q,as as je,al as a,O as S,ap as s,aj as D,aq as $e,ar as it,ao as ea,an as Ta,aD as ja,at as Wa,aE as Aa}from"../chunks/BUDlkbfV.js";import{e as Z}from"../chunks/CiCNsvIE.js";import{i as P}from"../chunks/28pso2Hb.js";import{s as Ba}from"../chunks/5HrxelVy.js";import{a as ke,s as ta,r as aa,b as Ka}from"../chunks/BJyhluUY.js";import{t as We,a as sa,f as ra,s as oa,b as Fa}from"../chunks/B2SxtloT.js";import{a as J,s as Ae}from"../chunks/D32zTIdM.js";import{s as i}from"../chunks/BbnaKca8.js";import{p as Ee}from"../chunks/Bf5_DoVm.js";import{e as et,i as lt}from"../chunks/BOGOvxWJ.js";import{C as za,h as Ua}from"../chunks/D9PEZBhV.js";import{s as Va}from"../chunks/CmEqjr1-.js";import{I as z}from"../chunks/DaDtKPX8.js";import{$ as Ze,a as rt}from"../chunks/C36u96xB.js";import{n as Lt}from"../chunks/BlC4O2HE.js";import{p as Ot}from"../chunks/dMfnY97A.js";import{b as Ha,c as Ga}from"../chunks/njKOc8Q7.js";import{a as nt}from"../chunks/E07TNQLR.js";import{s as Nt}from"../chunks/IXAamO68.js";import{_ as Qt}from"../chunks/Ct5FWWRu.js";import{_ as Qa}from"../chunks/BheWnx7M.js";import{h as Za}from"../chunks/D1MKGDQ_.js";import{b as Ja}from"../chunks/CGc6l0L7.js";import{a as na}from"../chunks/BqlTOgs2.js";import{g as Et}from"../chunks/DqiWXVxP.js";import{g as qe,c as Ya}from"../chunks/-np-DA1K.js";import{N as Xa}from"../chunks/kAk1PkLC.js";import{g as Me}from"../chunks/e6l8DgL1.js";import{s as Te}from"../chunks/3azsccOw.js";import{t as _e}from"../chunks/sXlFIKQv.js";import{p as Qe,l as es}from"../chunks/Do-RpF6d.js";import{m as Zt}from"../chunks/BaswSlok.js";import{v as ts}from"../chunks/BKrj-4V8.js";import{C as as,W as ss}from"../chunks/He80omRg.js";import{c as It}from"../chunks/DMOjeqFW.js";import{c as Mt,n as rs}from"../chunks/CpY9QRO1.js";import{a as Ge}from"../chunks/-4D0oWvs.js";import{s as Jt}from"../chunks/C-VEydUt.js";import{h as os}from"../chunks/DlstPydP.js";const ns=!1,is=!0,ls=!1,Dr=Object.freeze(Object.defineProperty({__proto__:null,csr:is,prerender:ls,ssr:ns},Symbol.toStringTag,{value:"Module"}));var cs=y('<div class="chat-session-list svelte-1jit7h3"></div>');function ds(W,x){Oe(x,!1);let m=Ee(x,"sessions",24,()=>[]),I=Ee(x,"onSelect",8,C=>{}),o=Ee(x,"onDelete",8,C=>{});Le();var _=cs();et(_,5,m,lt,(C,g)=>{za(C,{get session(){return e(g)},onClick:()=>I()(e(g).id),onDelete:()=>o()(e(g).id)})}),t(_),d(W,_),Re()}function vs(W){const[x,m]=Ae(),I=()=>J(Va,"$sortedChatSessions",x);ds(W,{get sessions(){return I()},get onSelect(){return Ua},onDelete:()=>{}}),m()}var us=y('<div class="sidebar-overlay svelte-1pfsbpw"></div>'),ps=y('<span class="absolute top-2 left-6 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white dark:border-gray-900"></span>'),ms=y('<div><button class="control-button svelte-1pfsbpw"><!></button></div> <!> <div><div class="sidebar-header svelte-1pfsbpw"><a href="/hub" class="sidebar-link svelte-1pfsbpw"><!> <span> </span></a> <a href="/feed" class="sidebar-link svelte-1pfsbpw"><!> <span> </span></a> <a href="/edit3" class="sidebar-link svelte-1pfsbpw"><!> <span> </span></a> <a href="/user/setting" class="sidebar-link relative svelte-1pfsbpw"><!> <span> </span> <!></a></div> <div class="sidebar-content svelte-1pfsbpw"><!></div> <div class="sidebar-footer svelte-1pfsbpw"><a href="/guide" class="sidebar-link svelte-1pfsbpw"><!> <span> </span></a> <a href="https://discord.gg/uJG9hWSrJx" target="_blank" rel="noopener noreferrer" class="discord-link svelte-1pfsbpw"><!> <span> </span></a></div></div>',1);function fs(W,x){Oe(x,!1);const[m,I]=Ae(),o=()=>J(Ze,"$t",m),_=()=>J(C,"$unreadCount",m),{unreadCount:C}=Lt;let g=Ee(x,"showSidebar",12,!0),n=q(!1);ot(()=>{const H=window.matchMedia("(max-width: 768px)");h(n,H.matches);const pe=De=>{h(n,De.matches)};H.addEventListener("change",pe);const ze=()=>{M=document.fullscreenElement!=null};return document.addEventListener("fullscreenchange",ze),()=>{H.removeEventListener("change",pe),document.removeEventListener("fullscreenchange",ze)}});let M=!1;Le();var T=ms(),w=je(T);let l;var v=a(w),E=a(v);const K=S(()=>g()?"ci:bar-left":"ci:bar-right");z(E,{get icon(){return e(K)},width:"24",height:"24"}),t(v),t(w);var F=s(w,2);{var A=H=>{var pe=us();Z("click",pe,()=>g(!1)),d(H,pe)};P(F,H=>{e(n)&&g()&&H(A)})}var L=s(F,2);let O;var Y=a(L),U=a(Y),X=a(U);z(X,{icon:"ph:compass-duotone",width:"24",height:"24"});var R=s(X,2),N=a(R,!0);t(R),t(U);var b=s(U,2),B=a(b);z(B,{icon:"material-symbols:smart-display-outline",width:"24",height:"24"});var ie=s(B,2),ye=a(ie,!0);t(ie),t(b);var Ce=s(b,2),c=a(Ce);z(c,{icon:"ph:plus-circle-duotone",width:"24",height:"24"});var $=s(c,2),k=a($,!0);t($),t(Ce);var ae=s(Ce,2),le=a(ae);z(le,{icon:"ph:gear-duotone",width:"24",height:"24"});var ce=s(le,2),Pe=a(ce,!0);t(ce);var ct=s(ce,2);{var dt=H=>{var pe=ps();d(H,pe)};P(ct,H=>{_()>0&&H(dt)})}t(ae),t(Y);var r=s(Y,2),f=a(r);vs(f),t(r);var j=s(r,2),V=a(j),ue=a(V);z(ue,{icon:"ph:book-open-text-duotone",width:"24",height:"24"});var be=s(ue,2),Be=a(be,!0);t(be),t(V);var Ke=s(V,2),tt=a(Ke);z(tt,{icon:"ic:baseline-discord",width:"24",height:"24"});var Fe=s(tt,2),vt=a(Fe,!0);t(Fe),t(Ke),t(j),t(L),D((H,pe,ze,De,Je,Ue,at,Ye,ut)=>{l=ke(w,1,"controls-wrapper svelte-1pfsbpw",null,l,H),ta(v,"title",pe),O=ke(L,1,"sidebar svelte-1pfsbpw",null,O,ze),i(N,De),i(ye,Je),i(k,Ue),i(Pe,at),i(Be,Ye),i(vt,ut)},[()=>({"sidebar-open":g()}),()=>g()?o()("sidebar.hide"):o()("sidebar.show"),()=>({open:g()}),()=>o()("chatSession.system.search"),()=>o()("chatSession.system.feed"),()=>o()("chatSession.system.create"),()=>o()("chatSession.system.user"),()=>o()("guide.tabGuide"),()=>o()("sidebar.community")],S),Z("click",v,()=>g(!g())),d(W,T),Re(),I()}var hs=y('<span class="absolute -top-1 -right-1 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white dark:border-gray-900"></span>'),_s=y('<a><div class="relative"><!> <!></div> <span class="nav-label svelte-1pthijr"> </span></a>'),bs=y('<nav class="nav-bottom svelte-1pthijr"></nav>');function gs(W,x){Oe(x,!1);const[m,I]=Ae(),o=()=>J(Ze,"$t",m),_=()=>J(Ot,"$page",m),C=()=>J(M,"$unreadCount",m),g=q(),n=q(),{unreadCount:M}=Lt;$e(()=>o(),()=>{h(g,[{href:"/hub",icon:"ph:compass-duotone",label:o()("nav.explore")},{href:"/feed",icon:"material-symbols:smart-display-outline",label:o()("nav.feed")},{href:"/chat",icon:"ph:chats-duotone",label:o()("nav.chat")},{href:"/edit3",icon:"ph:plus-circle-duotone",label:o()("nav.create")},{href:"/user/setting",icon:"ph:user-circle-duotone",label:o()("nav.settings")}])}),$e(()=>_(),()=>{h(n,_().url.pathname)}),it(),Le();var T=bs();et(T,5,()=>e(g),lt,(w,l)=>{let v=()=>e(l).href,E=()=>e(l).icon,K=()=>e(l).label;var F=_s();let A;var L=a(F),O=a(L);z(O,{get icon(){return E()},width:"24",height:"24"});var Y=s(O,2);{var U=N=>{var b=hs();d(N,b)};P(Y,N=>{v()==="/user/setting"&&C()>0&&N(U)})}t(L);var X=s(L,2),R=a(X,!0);t(X),t(F),D(N=>{A=ke(F,1,"nav-item svelte-1pthijr",null,A,N),ta(F,"href",v()),i(R,K())},[()=>({active:e(n)===v()||v()!=="/"&&e(n).startsWith(v())})],S),d(w,F)}),t(T),d(W,T),Re(),I()}var ws=y('<p class="svelte-1q9bx17"> </p>'),ys=y('<div class="cheat-console-overlay svelte-1q9bx17" role="dialog" aria-modal="true"><div class="console-window svelte-1q9bx17"><div class="console-header svelte-1q9bx17"><h3 class="svelte-1q9bx17">console</h3> <button class="close-btn svelte-1q9bx17">&times;</button></div> <div class="console-output svelte-1q9bx17"></div> <div class="console-input-area svelte-1q9bx17"><span class="svelte-1q9bx17">$</span> <input type="text" class="console-input svelte-1q9bx17" placeholder="명령어를 입력하세요"/></div></div></div>');function xs(W,x){Oe(x,!1);let m=Ee(x,"isVisible",8,!1),I=q(""),o=q([]);const _=Yt();async function C(l){if(!l.trim()){n("❌ 명령어를 입력해주세요.");return}n(`➡️ ${l} 명령어 실행 중...`);try{const v=await nt.get(`/api/cheat?cmd=${l}`);if(v.ok){const E=`✅ '${l}' 치트 실행 성공!`;n(E)}else{const E=await v.text(),K=`❌ '${l}' 치트 실행 실패: ${v.status} - ${E}`;n(K)}}catch(v){const E=`⚠️ '${l}' 실행 중 네트워크 오류: ${v.message}`;n(E)}}function g(l){l.key==="Enter"?(l.preventDefault(),C(e(I)),h(I,"")):l.key==="Escape"&&_("close")}function n(l){h(o,[...e(o),l]),setTimeout(()=>{const v=document.querySelector(".console-output");v&&(v.scrollTop=v.scrollHeight)},0)}Xt(()=>{}),$e(()=>ea(m()),()=>{m()}),it(),Le();var M=Xe(),T=je(M);{var w=l=>{var v=ys(),E=a(v),K=a(E),F=s(a(K),2);t(K);var A=s(K,2);et(A,5,()=>e(o),lt,(Y,U)=>{var X=ws(),R=a(X,!0);t(X),D(()=>i(R,e(U))),d(Y,X)}),t(A);var L=s(A,2),O=s(a(L),2);aa(O),t(L),t(E),t(v),Z("click",F,()=>_("close")),Ha(O,()=>e(I),Y=>h(I,Y)),Z("keydown",O,g),d(l,v)};P(T,l=>{m()&&l(w)})}d(W,M),Re()}var $s=y('<div class="promo-box svelte-17wubst"><div class="promo-content svelte-17wubst"><!> <span> </span></div> <button class="promo-action-btn svelte-17wubst"> <!></button></div>'),ks=y('<span class="bonus-pill svelte-17wubst"> </span>'),Ps=y('<span class="best-badge svelte-17wubst"> </span>'),Ss=y('<span class="old-price svelte-17wubst"> </span>'),Cs=y('<span class="old-price svelte-17wubst"> </span>'),Ns=y('<button><div class="row-left svelte-17wubst"><div><!></div> <div class="info-wrapper svelte-17wubst"><div class="neurons-count svelte-17wubst"> <span class="unit svelte-17wubst">N</span></div> <!></div></div> <div class="row-right svelte-17wubst"><!> <div class="price-container svelte-17wubst"><!> <span> </span></div></div></button>'),Is=y('<div class="notice-content svelte-17wubst"><!></div>'),Ms=y('<div class="loading-geo svelte-17wubst"><!></div>'),Es=y('<span class="spinner svelte-17wubst"></span>'),Ls=y('<button class="purchase-btn svelte-17wubst"><!></button>'),Os=y('<button class="purchase-btn svelte-17wubst"><!></button>'),Rs=y('<div class="paypal-button-container svelte-17wubst"></div> <!>',1),Ds=y('<div><div class="modal-content svelte-17wubst"><div class="modal-header svelte-17wubst"><h2 class="svelte-17wubst"><!></h2> <button class="close-button svelte-17wubst"><!></button></div> <div class="modal-body svelte-17wubst"><!> <div class="pricing-list svelte-17wubst"></div> <div class="precautions-section svelte-17wubst"><button class="toggle-btn svelte-17wubst"><!> <span> </span> <!></button> <!></div> <div class="business-info-minimal svelte-17wubst"><p class="font-bold svelte-17wubst"> </p> <p class="svelte-17wubst"> <span class="mx-1 svelte-17wubst">|</span> </p> <p class="svelte-17wubst"> </p> <p class="svelte-17wubst"> </p> <p class="svelte-17wubst"> <span class="mx-1 svelte-17wubst">|</span> </p> <p class="mt-1 svelte-17wubst"> </p> <p class="svelte-17wubst"> </p></div></div> <div class="modal-footer svelte-17wubst"><div class="policy-agreement svelte-17wubst"><label class="checkbox-label svelte-17wubst"><input type="checkbox" class="svelte-17wubst"/> <span class="checkbox-custom svelte-17wubst"><!></span> <span class="agreement-text svelte-17wubst"> <a href="/refund" target="_blank" class="svelte-17wubst"> </a> </span></label></div> <div class="current-balance svelte-17wubst"><span> </span> <strong class="svelte-17wubst"> </strong></div> <!></div></div></div>');function qs(W,x){Oe(x,!1);const[m,I]=Ae(),o=()=>J(rt,"$locale",m),_=()=>J(Ot,"$page",m),C=()=>J(Qe,"$pricingStore",m),g=()=>J(Te,"$st_user",m),n=()=>J(Ze,"$t",m),M=q(),T=q();let w=q(null),l=q(),v=null;async function E(){try{const f=await(await fetch("https://ipapi.co/json/")).json();h(w,f.country_code==="KR"),console.log(`[GeoIP] Country: ${f.country_code}, isKorean: ${e(w)}`)}catch(r){console.warn("[GeoIP] Detection failed, defaulting to Korean:",r),h(w,!0)}}function K(){if(!window.paypal||!e(l)||!e(b)||!e(B)||v===e(b).item_id)return;ja(l,e(l).innerHTML="");const r=e(b).item_id;window.paypal.Buttons({style:{layout:"vertical",color:"gold",shape:"rect",label:"paypal",height:45},createOrder:async()=>{try{const f=await nt.post("/api/paypal/create-order",{item_id:e(b).item_id});if(!f.ok){const V=await f.json().catch(()=>({}));throw new Error(V.error||"Failed to create order")}return(await f.json()).orderID}catch(f){throw _e.error(f.message||"Failed to create PayPal order"),f}},onApprove:async f=>{h(N,!0);try{const j=await nt.post("/api/paypal/capture",{orderID:f.orderID});if(!j.ok){const be=await j.json().catch(()=>({}));throw new Error(be.error||"Payment capture failed")}const V=await j.json(),ue=await qe();ue&&Te.set(ue),_e.success(`Payment successful! +${V.neurons} Neurons`),R()}catch(j){_e.error(j.message||"Payment failed")}finally{h(N,!1)}},onError:f=>{console.error("[PayPal] Button error:",f),_e.error("PayPal encountered an error.")}}).render(e(l)).then(()=>{v=r})}function F(){e(w)===!1&&(!e(b)||!e(B)||!e(l)||setTimeout(()=>K(),100))}let A=q(""),L=q(!0),O=Ee(x,"isOpen",12,!1),Y=Ee(x,"isNeedNeurons",8,!1);const U=Yt();function X(r){O()&&r.key==="Escape"&&R()}function R(){O(!1),U("close")}Xt(()=>{window.removeEventListener("keydown",X)});let N=q(!1),b=q(null),B=q(!1);function ie(r){r.id,h(b,r),v=null,F()}async function ye(){if(!e(b))return;h(N,!0);const r=ce();if(!r){h(N,!1);return}if(localStorage.setItem("payment_return_url",_().url.pathname),localStorage.setItem("payment_start_history_len",window.history.length.toString()),!window.PortOne){console.error("PortOne SDK not loaded"),h(N,!1);return}try{const f=await window.PortOne.requestPayment({storeId:r.storeId,channelKey:r.channelKey,paymentId:r.paymentId,orderName:r.orderName,totalAmount:Number(r.totalAmount),currency:"CURRENCY_KRW",payMethod:"CARD",customer:{fullName:r.name||"Test User",phoneNumber:"010-0000-0000",email:r.email||"test@example.com"},customData:{userId:r.userId,credits:Number(r.credits)},redirectUrl:`${window.location.origin}/payment/complete`});if(f.code!=null){console.error("PortOne Error:",f),_e.error(f.message||"Payment failed"),h(N,!1);return}const j=await qe();j&&Te.set(j),_e.success("Payment successful! Neurons updated."),R(),h(N,!1)}catch(f){console.error("PortOne Exception:",f),_e.error("An unexpected error occurred during payment."),h(N,!1)}}ot(()=>{if(window.addEventListener("keydown",X),E(),O()&&Qe.fetchPricingPolicy(),!document.getElementById("portone-v2-sdk")){const r=document.createElement("script");r.id="portone-v2-sdk",r.src="https://cdn.portone.io/v2/browser-sdk.js",r.defer=!0,document.body.appendChild(r)}if(!document.getElementById("paypal-sdk")){const r=document.createElement("script");r.id="paypal-sdk",r.src="https://www.paypal.com/sdk/js?client-id=ATj3iC5_ZaCmh54RLvDfhd80nWHfZV1l1TMih0exrj6ZLSL-xz8PQ1wrrIxbdKfCqiADWBIcmbKoHztr&currency=USD",r.defer=!0,document.body.appendChild(r)}});let Ce=q(0),c=Me(Te)?.data.hasReceivedFirstCreationReward;function $(r){const f=["simple","standard","double"],j=[28,32,36,40],V=Math.min(r,f.length-1);return{variant:f[V],size:j[V],color:"#525252"}}function k(r){return r.bonus_amount&&r.bonus_amount>0?Math.round(r.bonus_amount/r.neurons*100):0}function ae(r){return e(w)===!1?+(r*.008).toFixed(2):r*10}function le(r){return e(w)===!1&&r.price_usd?`$${r.price_usd.toFixed(2)}`:r.price_display}function ce(){if(!e(b))return null;const r=Me(Te);if(!r)return null;const f=ts(),j=e(b).name||`${(e(b).neurons+(e(b).bonus_amount||0)).toLocaleString()} Neurons`,V=e(b).price_krw,ue=e(b).neurons+(e(b).bonus_amount||0),be="store-04392323-c1ba-4c80-9812-ae8577171bb0",Be="channel-key-b501c70e-2ab1-4c88-b67c-896889164efc",Ke=new URLSearchParams({paymentId:f,amount:V.toString(),credits:ue.toString(),productName:j,userId:r.id,email:r.email||"",name:r.name||"",storeId:be,channelKey:Be});return{paymentId:f,orderName:j,totalAmount:V,credits:ue,storeId:be,channelKey:Be,userId:r.id,email:r.email||"",name:r.name||"",paramsStr:Ke.toString()}}$e(()=>o(),()=>{h(M,o()||"en")}),$e(()=>(e(M),Zt),()=>{e(M)&&Qa(Object.assign({"../../i18n/locales/en/shop_notice.md":()=>Qt(()=>import("../chunks/CgeJC8KZ.js"),[],import.meta.url),"../../i18n/locales/ko/shop_notice.md":()=>Qt(()=>import("../chunks/HRNZLmrn.js"),[],import.meta.url)}),`../../i18n/locales/${e(M)}/shop_notice.md`,6).then(async r=>{h(A,await Zt(r.default))}).catch(r=>{console.error(r),h(A,"")})}),$e(()=>_(),()=>{h(T,_().url.pathname.startsWith("/chat")||_().url.pathname.startsWith("/2d")||_().url.pathname.startsWith("/live2d")||_().url.pathname.startsWith("/character"))}),$e(()=>(ea(O()),C(),Qe),()=>{O()&&C().purchase_options.length===0&&Qe.fetchPricingPolicy()}),$e(()=>g(),()=>{h(Ce,g()?.credits||0)}),it(),Le();var Pe=Xe(),ct=je(Pe);{var dt=r=>{var f=Ds();let j;var V=a(f),ue=a(V),be=a(ue),Be=a(be);{var Ke=p=>{var u=He();D(G=>i(u,G),[()=>n()("needNeuronsModal.title")],S),d(p,u)},tt=p=>{var u=He();D(G=>i(u,G),[()=>n()("needNeuronsModal.rechargeTitle")],S),d(p,u)};P(Be,p=>{Y()?p(Ke):p(tt,!1)})}t(be);var Fe=s(be,2),vt=a(Fe);z(vt,{icon:"ph:x-bold",width:"20",height:"20"}),t(Fe),t(ue);var H=s(ue,2),pe=a(H);{var ze=p=>{var u=$s(),G=a(u),me=a(G);z(me,{icon:"ph:gift-bold",width:"24",class:"text-gold"});var ee=s(me,2),se=a(ee,!0);t(ee),t(G);var de=s(G,2),fe=a(de),xe=s(fe);z(xe,{icon:"ph:arrow-right-bold"}),t(de),t(u),D((re,Q)=>{i(se,re),i(fe,`${Q??""} `)},[()=>n()("needNeuronsModal.firstCreationReward"),()=>n()("needNeuronsModal.getFreeNeurons")],S),Z("click",de,()=>{R(),Et("/edit3")}),d(p,u)};P(pe,p=>{c&&p(ze)})}var De=s(pe,2);et(De,5,()=>C().purchase_options.filter(p=>e(w)===null||(e(w)?p.price_krw>0:p.price_usd&&p.price_usd>0)),lt,(p,u,G)=>{var me=Ns();const ee=S(()=>e(b)===e(u)),se=S(()=>$(G)),de=S(()=>k(e(u))),fe=S(()=>e(u).neurons+(e(u).bonus_amount||0)),xe=S(()=>ae(e(fe)));let re;var Q=a(me),ve=a(Q);let Ne;var he=a(ve);const ge=S(()=>e(ee)?"#fbbf24":"#525252");Xa(he,{get size(){return e(se).size},get variant(){return e(se).variant},get color(){return e(ge)}}),t(ve);var oe=s(ve,2),Ie=a(oe),kt=a(Ie);Ta(),t(Ie);var Ca=s(Ie,2);{var Na=te=>{var ne=ks(),Se=a(ne);t(ne),D((we,Ve)=>i(Se,`+${we??""}
                                            ${Ve??""}`),[()=>Math.floor(e(u).bonus_amount).toLocaleString(),()=>n()("shop.bonus_label")],S),d(te,ne)};P(Ca,te=>{e(u).bonus_amount&&e(u).bonus_amount>0&&te(Na)})}t(oe),t(Q);var Ft=s(Q,2),zt=a(Ft);{var Ia=te=>{var ne=Ps(),Se=a(ne,!0);t(ne),D(we=>i(Se,we),[()=>n()("shop.best_value")],S),d(te,ne)};P(zt,te=>{e(de)>=20&&te(Ia)})}var Ut=s(zt,2),Vt=a(Ut);{var Ma=te=>{var ne=Ss(),Se=a(ne);t(ne),D(we=>i(Se,`${we??""}₩`),[()=>e(xe).toLocaleString()],S),d(te,ne)},Ea=(te,ne)=>{{var Se=we=>{var Ve=Xe();const Gt=S(()=>ae(e(fe)));var Oa=je(Ve);{var Ra=St=>{var Ct=Cs(),Da=a(Ct);t(Ct),D(qa=>i(Da,`$${qa??""}`),[()=>e(Gt).toFixed(2)],S),d(St,Ct)};P(Oa,St=>{e(u).price_usd&&e(u).price_usd<e(Gt)&&St(Ra)})}d(we,Ve)};P(te,we=>{e(w)===!1&&we(Se)},ne)}};P(Vt,te=>{e(w)!==!1&&e(u).price_krw<e(xe)?te(Ma):te(Ea,!1)})}var Pt=s(Vt,2);let Ht;var La=a(Pt,!0);t(Pt),t(Ut),t(Ft),t(me),D((te,ne,Se,we,Ve)=>{re=ke(me,1,"pricing-row svelte-17wubst",null,re,te),Ne=ke(ve,1,"icon-wrapper svelte-17wubst",null,Ne,ne),i(kt,`${Se??""} `),Ht=ke(Pt,1,"current-price svelte-17wubst",null,Ht,we),i(La,Ve)},[()=>({selected:e(ee)}),()=>({active:e(ee)}),()=>e(u).neurons.toLocaleString(),()=>({highlight:e(ee)}),()=>le(e(u))],S),Z("click",me,()=>ie(e(u))),d(p,me)}),t(De);var Je=s(De,2),Ue=a(Je),at=a(Ue);z(at,{icon:"ph:info-bold",width:"16"});var Ye=s(at,2),ut=a(Ye,!0);t(Ye);var ia=s(Ye,2);const la=S(()=>e(L)?"open":"");z(ia,{icon:"ph:caret-down-bold",width:"16",get class(){return`caret ${e(la)??""}`}}),t(Ue);var ca=s(Ue,2);{var da=p=>{var u=Is(),G=a(u);Za(G,()=>e(A)),t(u),We(3,u,()=>oa),d(p,u)};P(ca,p=>{e(L)&&p(da)})}t(Je);var Rt=s(Je,2),pt=a(Rt),va=a(pt,!0);t(pt);var mt=s(pt,2),Dt=a(mt),ua=s(Dt,2);t(mt);var ft=s(mt,2),pa=a(ft,!0);t(ft);var ht=s(ft,2),ma=a(ht,!0);t(ht);var _t=s(ht,2),qt=a(_t),fa=s(qt,2);t(_t);var bt=s(_t,2),ha=a(bt,!0);t(bt);var Tt=s(bt,2),_a=a(Tt,!0);t(Tt),t(Rt),t(H);var jt=s(H,2),gt=a(jt),Wt=a(gt),st=a(Wt);aa(st);var wt=s(st,2),ba=a(wt);{var ga=p=>{z(p,{icon:"material-symbols:check-small-rounded",width:"16"})};P(ba,p=>{e(B)&&p(ga)})}t(wt);var At=s(wt,2),Bt=a(At),yt=s(Bt),wa=a(yt,!0);t(yt);var ya=s(yt);t(At),t(Wt),t(gt);var xt=s(gt,2),$t=a(xt),xa=a($t,!0);t($t);var Kt=s($t,2),$a=a(Kt);t(Kt),t(xt);var ka=s(xt,2);{var Pa=p=>{var u=Ms(),G=a(u);z(G,{icon:"svg-spinners:ring-resize",width:"20"}),t(u),d(p,u)},Sa=(p,u)=>{{var G=ee=>{var se=Ls(),de=a(se);{var fe=re=>{var Q=Es();d(re,Q)},xe=(re,Q)=>{{var ve=he=>{var ge=He();D(oe=>i(ge,oe),[()=>n()("shop.purchase_button",{values:{price:e(b).price_display}})],S),d(he,ge)},Ne=he=>{var ge=He();D(oe=>i(ge,oe),[()=>n()("shop.select_option")],S),d(he,ge)};P(re,he=>{e(b)?he(ve):he(Ne,!1)},Q)}};P(de,re=>{e(N)?re(fe):re(xe,!1)})}t(se),D(()=>se.disabled=e(N)||!e(b)||!e(B)),Z("click",se,ye),d(ee,se)},me=ee=>{var se=Rs(),de=je(se);let fe;Ja(de,Q=>h(l,Q),()=>e(l));var xe=s(de,2);{var re=Q=>{var ve=Os();ve.disabled=!0;var Ne=a(ve);{var he=oe=>{var Ie=He();D(kt=>i(Ie,kt),[()=>n()("shop.select_option")],S),d(oe,Ie)},ge=oe=>{var Ie=He("PayPal Checkout");d(oe,Ie)};P(Ne,oe=>{e(b)?oe(ge,!1):oe(he)})}t(ve),d(Q,ve)};P(xe,Q=>{(!e(b)||!e(B))&&Q(re)})}D(()=>fe=Ka(de,"",fe,{display:e(b)&&e(B)?"block":"none"})),d(ee,se)};P(p,ee=>{e(w)?ee(G):ee(me,!1)},u)}};P(ka,p=>{e(w)===null?p(Pa):p(Sa,!1)})}t(jt),t(V),t(f),D((p,u,G,me,ee,se,de,fe,xe,re,Q,ve,Ne,he,ge,oe)=>{j=ke(f,1,"modal-backdrop svelte-17wubst",null,j,p),i(ut,u),i(va,G),i(Dt,`${me??""} `),i(ua,` ${ee??""}`),i(pa,se),i(ma,de),i(qt,`${fe??""} `),i(fa,` ${xe??""}`),i(ha,re),i(_a,Q),i(Bt,`${ve??""} `),i(wa,Ne),i(ya,` ${he??""}`),i(xa,ge),i($a,`${oe??""} N`)},[()=>({"chat-mode":e(T)}),()=>n()("shop.notice.title",{default:"Precautions"}),()=>n()("footer.companyName"),()=>n()("footer.ceo"),()=>n()("footer.bizLicense"),()=>n()("footer.address"),()=>n()("footer.mailOrder"),()=>n()("footer.phone"),()=>n()("footer.email"),()=>n()("footer.liability"),()=>n()("footer.grievance"),()=>n()("legal.checkedAndAgree"),()=>n()("legal.refundPolicy"),()=>n()("legal.agreedToPolicies"),()=>n()("shop.current_neurons"),()=>e(Ce).toLocaleString()],S),Z("click",Fe,R),Z("click",Ue,()=>h(L,!e(L))),Ga(st,()=>e(B),p=>h(B,p)),Z("change",st,()=>F()),We(3,V,()=>sa,()=>({y:300,duration:300})),Z("click",f,na(R)),We(3,f,()=>ra,()=>({duration:200})),d(r,f)};P(ct,r=>{O()&&r(dt)})}d(W,Pe),Re(),I()}var Ts=y('<div role="alert"><div class="icon svelte-122qfb5"><!></div> <div class="message svelte-122qfb5"> </div> <button class="close-btn svelte-122qfb5"><!></button></div>');function js(W,x){Oe(x,!1);let m=Ee(x,"item",8);function I(){_e.remove(m().id)}const o={success:"ph:check-circle-fill",error:"ph:warning-circle-fill",info:"ph:info-fill",warning:"ph:warning-fill"};Le();var _=Ts(),C=a(_),g=a(C);z(g,{get icon(){return o[m().type]},width:"24"}),t(C);var n=s(C,2),M=a(n,!0);t(n);var T=s(n,2),w=a(T);z(w,{icon:"ph:x-bold"}),t(T),t(_),D(()=>{ke(_,1,`toast ${m().type??""}`,"svelte-122qfb5"),i(M,m().message)}),Z("click",T,I),We(3,_,()=>sa,()=>({y:20,duration:300})),d(W,_),Re()}var Ws=y('<div class="toast-container svelte-1v6epbc"></div>');function As(W){const[x,m]=Ae(),I=()=>J(_e,"$toast",x);var o=Ws();et(o,5,I,_=>_.id,(_,C)=>{js(_,{get item(){return e(C)}})}),t(o),d(W,o),m()}var Bs=y('<h3 class="svelte-wec4vd"> </h3>'),Ks=y('<div class="backdrop svelte-wec4vd"><div class="modal svelte-wec4vd" role="dialog" aria-modal="true"><div class="content svelte-wec4vd"><!> <p class="message svelte-wec4vd"> </p></div> <div class="actions svelte-wec4vd"><button class="btn cancel svelte-wec4vd"> </button> <button> </button></div></div></div>');function Fs(W,x){Oe(x,!1);const[m,I]=Ae(),o=()=>J(It,"$confirmStore",m),_=()=>J(Ze,"$t",m);function C(){It.close(!0)}function g(){It.close(!1)}function n(l){o().isOpen&&l.key==="Escape"&&g()}Le();var M=Xe();Z("keydown",Wa,n);var T=je(M);{var w=l=>{var v=Ks(),E=a(v),K=a(E),F=a(K);{var A=B=>{var ie=Bs(),ye=a(ie,!0);t(ie),D(()=>i(ye,o().options.title)),d(B,ie)};P(F,B=>{o().options.title&&B(A)})}var L=s(F,2),O=a(L,!0);t(L),t(K);var Y=s(K,2),U=a(Y),X=a(U,!0);t(U);var R=s(U,2);let N;var b=a(R,!0);t(R),t(Y),t(E),t(v),D((B,ie,ye)=>{i(O,o().options.message),i(X,B),N=ke(R,1,"btn confirm svelte-wec4vd",null,N,ie),i(b,ye)},[()=>o().options.cancelText||_()("common.cancel")||"Cancel",()=>({danger:o().options.type==="danger"}),()=>o().options.confirmText||_()("common.confirm")||"Confirm"],S),Z("click",U,g),Z("click",R,C),We(3,E,()=>Fa,()=>({duration:200,start:.95})),Z("click",v,na(g)),We(3,v,()=>ra,()=>({duration:200})),d(l,v)};P(T,l=>{o().isOpen&&l(w)})}d(W,M),Re(),I()}var zs=y('<div class="nav-bottom-wrapper"><!></div>'),Us=y('<button class="back-btn svelte-om3nsy"><!></button>'),Vs=y('<div class="layout svelte-om3nsy"><!> <main><!> <!></main> <!> <!> <!> <!> <!> <!> <!></div>');function qr(W,x){Oe(x,!1);const[m,I]=Ae(),o=()=>J(Ot,"$page",m),_=()=>J(os,"$hideBackButton",m),C=()=>J(rs,"$needMoreNeuronsModal",m),g=q(),n=q();"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(c=>console.log("Service Worker registered:",c),c=>console.error("Service Worker registration failed:",c))});let M=q(!1);{const c=window.matchMedia("(max-width: 768px)");h(M,c.matches),c.addEventListener("change",$=>h(M,$.matches))}let T=q(!1),w=q(!1),l=q(!1);ot(()=>{const c=k=>{_e.error(k.detail?.message||"일시적인 오류가 발생했어요. 다시 시도해주세요.")};window.addEventListener("chat-error",c),Qe.fetchPricingPolicy(),Jt.auth.getSession().then(({data:{session:k}})=>{k?(Ge.set(k.access_token),qe()):Ge.set(null)});const{data:{subscription:$}}=Jt.auth.onAuthStateChange((k,ae)=>{ae?(Ge.set(ae.access_token),qe()):(Ge.set(null),["/login","/signup","/","/test","/suspended","/install","/terms","/policy","/privacy","/licenses","/profile","/hub","/creator"].includes(o().url.pathname)||o().url.pathname.startsWith("/test/")||Et("/login"))});return()=>$.unsubscribe()}),ot(async()=>{const c=new URLSearchParams(window.location.search);if(c.get("paymentId")){const k=c.get("code"),ae=c.get("message"),le=ae?decodeURIComponent(ae):"",ce=window.location.pathname+window.location.hash;if(window.history.replaceState({},document.title,ce),k){console.error("Payment Error Redirect:",k,le),_e.error(le||Me(Ze)("shop.payment_failed",{default:"Payment failed."})),Mt();return}const Pe=await qe();Pe&&(Te.set(Pe),_e.success(Me(Ze)("shop.payment_complete_toast",{default:"Payment verified! Neurons added."})),Mt())}}),Ge.subscribe(async c=>{if(Aa(),!c)return;Qe.fetchPricingPolicy();let $=await qe();$&&($.state==="new"&&h(w,!0),$.data.language===""?Nt.update(k=>(k.language=Me(rt)||"en",{...k})):$.data.language!==Me(rt)&&Nt.update(k=>(k.language=$.data.language,{...k}))),es(),$&&Lt.init($.ssid)}),Nt.subscribe(async c=>{if(Me(Ge)===null)return;const $=await qe();if($){let k=$;k.data||(k.data={nickname:k.name,language:c.language,lastLoginAt:"",createdAt:"",hasReceivedFirstCreationReward:!1,lastLoginIP:""});const ae={name:k.name,nickname:k.data.nickname||"",language:Me(rt)||"en",llmType:c.llmType};(await nt.post("/api/user/edit",ae)).ok&&console.log("최종 저장완료!")}});function v(){history.length<=1?Et("/hub"):history.back()}$e(()=>(e(M),o()),()=>{h(g,e(M)&&!["/test","/2d","/character","/","/live2d","/maintenance"].includes(o().url.pathname)&&!o().url.pathname.startsWith("/test/"))}),$e(()=>o(),()=>{h(n,["/2d","/character","/live2d","/feed"].includes(o().url.pathname))}),it(),Le();var E=Vs(),K=a(E);{var F=c=>{fs(c,{})};P(K,c=>{!e(M)&&o().url.pathname!=="/maintenance"&&c(F)})}var A=s(K,2);let L;var O=a(A);Ba(O,x,"default",{});var Y=s(O,2);xs(Y,{get isVisible(){return e(T)},$$events:{close:()=>h(T,!1)}}),t(A);var U=s(A,2);{var X=c=>{var $=zs(),k=a($);gs(k,{}),t($),We(3,$,()=>oa,()=>({duration:300,axis:"y"})),d(c,$)};P(U,c=>{e(g)&&c(X)})}var R=s(U,2);as(R,{get isOpen(){return e(w)},$$events:{confirm:async()=>{const c=await Ya();Te.set(c),h(w,!1),h(l,!0)}}});var N=s(R,2);ss(N,{neuronAmount:100,get isOpen(){return e(l)}});var b=s(N,2);{var B=c=>{var $=Xe(),k=je($);{var ae=le=>{var ce=Us(),Pe=a(ce);z(Pe,{icon:"weui:back-filled",width:"12",height:"24"}),t(ce),Z("click",ce,v),d(le,ce)};P(k,le=>{_()||le(ae)})}d(c,$)};P(b,c=>{["/hub","/","/maintenance","/payment/complete"].includes(o().url.pathname)||c(B)})}var ie=s(b,2);qs(ie,{get isOpen(){return C().isOpen},get isNeedNeurons(){return C().isNeedNeurons},$$events:{close(...c){Mt?.apply(this,c)}}});var ye=s(ie,2);As(ye);var Ce=s(ye,2);Fs(Ce,{}),t(E),D(c=>L=ke(A,1,"no-scrollbar svelte-om3nsy",null,L,c),[()=>({"no-padding-bottom":e(n)})],S),d(W,E),Re(),I()}export{qr as component,Dr as universal};
