import"../chunks/NZTpNUN0.js";import"../chunks/Vvm9udaT.js";import{o as qe,c as We,a as Ie}from"../chunks/BB32ouRY.js";import{h as Re,a as Be,X as Q,a2 as s,a3 as e,l as O,x as V,_ as X,w as i,a0 as w,L as E,Z as Le,aw as o,au as J,av as fe,k as Fe,ay as Ve,g as Ce}from"../chunks/DJxVeldX.js";import{s as L,e as U}from"../chunks/C9woGF-z.js";import{b as x,a as y,c as He}from"../chunks/fOQuHGXh.js";import{i as H}from"../chunks/292SS5JT.js";import{b as Y,s as he,r as Ue}from"../chunks/CVCkp_ml.js";import{t as Ke,s as Qe}from"../chunks/CZB4GwcB.js";import{i as Z}from"../chunks/Degfot_7.js";import{a as K,s as re,d as Xe,m as Ze}from"../chunks/ZTUH0_7J.js";import{e as ne,i as oe}from"../chunks/DHri6rd4.js";import{p as A}from"../chunks/Zfh5ko2t.js";import{C as ue,c as Ge}from"../chunks/DjRwOXsZ.js";import{a as Je,h as Ye}from"../chunks/BsHGP0Jb.js";import{I as T}from"../chunks/Cphc7EI3.js";import{$ as Ee,a as ea}from"../chunks/Bit4kGOU.js";import{p as je}from"../chunks/pmDB9vb6.js";import{b as aa}from"../chunks/BgFAjVCA.js";import{a as pe,c as se,b as Me,d as ta}from"../chunks/BXQQiVcS.js";import{s as sa}from"../chunks/gt9WcTCj.js";import{N as ra}from"../chunks/BCKTa4ba.js";import{C as na,W as oa}from"../chunks/7ZTieWxY.js";import{l as ia,n as ze}from"../chunks/oasVcxk_.js";import{s as la}from"../chunks/YXWdkqOL.js";import{g as ca}from"../chunks/knpjl46v.js";function da(k,l,c,p,a){Re&&Be();var r=l.$$slots?.[c],h=!1;r===!0&&(r=l.children,h=!0),r===void 0||r(k,h?()=>p:p)}const va=!1,ua=!0,ha=!1,ot=Object.freeze(Object.defineProperty({__proto__:null,csr:ua,prerender:ha,ssr:va},Symbol.toStringTag,{value:"Module"}));var pa=x('<button class="svelte-1t7avj2"> </button>'),fa=x('<span class="svelte-1t7avj2"> </span>'),ma=x("<div><!></div>");function ba(k,l){Q(l,!1);let c=A(l,"session",24,()=>({id:"",name:"",type:ue.CHAT})),p=A(l,"onClick",8);A(l,"onDelete",8),Z();var a=ma();let r;var h=s(a);{var g=m=>{var d=pa(),_=s(d,!0);e(d),O(()=>L(_,c().name)),U("click",d,function(...n){p()?.apply(this,n)}),y(m,d)},f=m=>{var d=fa(),_=s(d,!0);e(d),O(()=>L(_,c().name)),y(m,d)};H(h,m=>{c().type!==ue.SPACE?m(g):m(f,!1)})}e(a),O(m=>r=Y(a,1,"slot svelte-1t7avj2",null,r,m),[()=>({space:c().type===ue.SPACE})],V),y(k,a),X()}var ga=x('<div class="chat-session-list svelte-1jit7h3"></div>');function _a(k,l){Q(l,!1);let c=A(l,"sessions",24,()=>[]),p=A(l,"onSelect",8,h=>{}),a=A(l,"onDelete",8,h=>{});Z();var r=ga();ne(r,5,c,oe,(h,g)=>{ba(h,{get session(){return i(g)},onClick:()=>p()(i(g).id),onDelete:()=>a()(i(g).id)})}),e(r),y(k,r),X()}function ka(k){const[l,c]=re(),p=()=>K(Ge,"$chatSessions",l);_a(k,{get sessions(){return p()},get onSelect(){return Ye},get onDelete(){return Je}}),c()}var ya=x('<div class="sidebar-overlay svelte-17ikzr6"></div>'),wa=x('<a class="legal-link-item svelte-17ikzr6"> </a>'),xa=x('<div><button class="control-button svelte-17ikzr6"><!></button></div> <!> <div><div class="sidebar-header svelte-17ikzr6"><a href="/hub" class="sidebar-link svelte-17ikzr6"><!> <span> </span></a> <a href="/feed" class="sidebar-link svelte-17ikzr6"><!> <span> </span></a> <a href="/edit" class="sidebar-link svelte-17ikzr6"><!> <span> </span></a> <a href="/user/setting" class="sidebar-link svelte-17ikzr6"><!> <span> </span></a></div> <div class="sidebar-content svelte-17ikzr6"><!></div> <div class="sidebar-footer svelte-17ikzr6"><a href="https://wind-chance-11f.notion.site/personaxi-com-228d058c022e80a1ae4ddf99878f5fbc?source=copy_link" target="_blank" rel="noopener noreferrer" class="sidebar-link svelte-17ikzr6"><!> <span> </span></a> <a href="https://discord.gg/pyPb9Pp6" target="_blank" rel="noopener noreferrer" class="discord-link svelte-17ikzr6"><!> <span> </span></a> <div class="legal-links-grid svelte-17ikzr6"></div></div></div>',1);function $a(k,l){Q(l,!1);const[c,p]=re(),a=()=>K(Ee,"$t",c);let r=A(l,"showSidebar",12,!0),h=E(!1);const g=[{href:"/policy",label:"legal.privacyPolicy"},{href:"/terms",label:"legal.termsOfService"},{href:"/licenses",label:"legal.licensesAndCredits"},{href:"/privacy-chat-logs",label:"legal.chatLogConsent"}];qe(()=>{const q=window.matchMedia("(max-width: 768px)");w(h,q.matches);const N=G=>{w(h,G.matches)};q.addEventListener("change",N);const B=()=>{f=document.fullscreenElement!=null};return document.addEventListener("fullscreenchange",B),()=>{q.removeEventListener("change",N),document.removeEventListener("fullscreenchange",B)}});let f=!1;Z();var m=xa(),d=Le(m);let _;var n=s(d),v=s(n);const b=V(()=>r()?"ci:bar-left":"ci:bar-right");T(v,{get icon(){return i(b)},width:"24",height:"24"}),e(n),e(d);var $=o(d,2);{var M=q=>{var N=ya();U("click",N,()=>r(!1)),y(q,N)};H($,q=>{i(h)&&r()&&q(M)})}var S=o($,2);let j;var z=s(S),D=s(z),W=s(D);T(W,{icon:"ph:compass-duotone",width:"24",height:"24"});var P=o(W,2),I=s(P,!0);e(P),e(D);var R=o(D,2),ee=s(R);T(ee,{icon:"material-symbols:smart-display-outline",width:"24",height:"24"});var ae=o(ee,2),t=s(ae,!0);e(ae),e(R);var u=o(R,2),C=s(u);T(C,{icon:"ph:plus-circle-duotone",width:"24",height:"24"});var te=o(C,2),me=s(te,!0);e(te),e(u);var be=o(u,2),ge=s(be);T(ge,{icon:"ph:gear-duotone",width:"24",height:"24"});var _e=o(ge,2),De=s(_e,!0);e(_e),e(be),e(z);var ie=o(z,2),Ne=s(ie);ka(Ne),e(ie);var ke=o(ie,2),le=s(ke),ye=s(le);T(ye,{icon:"ph:book-open-duotone",width:"24",height:"24"});var we=o(ye,2),Pe=s(we,!0);e(we),e(le);var ce=o(le,2),xe=s(ce);T(xe,{icon:"ic:baseline-discord",width:"24",height:"24"});var $e=o(xe,2),Te=s($e,!0);e($e),e(ce);var Se=o(ce,2);ne(Se,5,()=>g,oe,(q,N)=>{let B=()=>i(N).href,G=()=>i(N).label;var F=wa(),de=s(F,!0);e(F),O(ve=>{he(F,"href",B()),L(de,ve)},[()=>a()(G())],V),y(q,F)}),e(Se),e(ke),e(S),O((q,N,B,G,F,de,ve,Oe,Ae)=>{_=Y(d,1,"controls-wrapper svelte-17ikzr6",null,_,q),he(n,"title",N),j=Y(S,1,"sidebar svelte-17ikzr6",null,j,B),L(I,G),L(t,F),L(me,de),L(De,ve),L(Pe,Oe),L(Te,Ae)},[()=>({"sidebar-open":r()}),()=>r()?a()("sidebar.hide"):a()("sidebar.show"),()=>({open:r()}),()=>a()("chatSession.system.search"),()=>a()("chatSession.system.feed"),()=>a()("chatSession.system.create"),()=>a()("chatSession.system.user"),()=>a()("sidebar.tutorial"),()=>a()("sidebar.community")],V),U("click",n,()=>r(!r())),y(k,m),X(),p()}var Sa=x('<a><!> <span class="nav-label svelte-1pthijr"> </span></a>'),Ca=x('<nav class="nav-bottom svelte-1pthijr"></nav>');function Ma(k,l){Q(l,!1);const[c,p]=re(),a=()=>K(Ee,"$t",c),r=()=>K(je,"$page",c),h=E(),g=E();J(()=>a(),()=>{w(h,[{href:"/hub",icon:"ph:compass-duotone",label:a()("nav.explore")},{href:"/feed",icon:"material-symbols:smart-display-outline",label:a()("nav.feed")},{href:"/chat",icon:"ph:chats-duotone",label:a()("nav.chat")},{href:"/edit",icon:"ph:plus-circle-duotone",label:a()("nav.create")},{href:"/user/setting",icon:"ph:gear-duotone",label:a()("nav.settings")}])}),J(()=>r(),()=>{w(g,r().url.pathname)}),fe(),Z();var f=Ca();ne(f,5,()=>i(h),oe,(m,d)=>{let _=()=>i(d).href,n=()=>i(d).icon,v=()=>i(d).label;var b=Sa();let $;var M=s(b);T(M,{get icon(){return n()},width:"24",height:"24"});var S=o(M,2),j=s(S,!0);e(S),e(b),O(z=>{$=Y(b,1,"nav-item svelte-1pthijr",null,$,z),he(b,"href",_()),L(j,v())},[()=>({active:i(g)===_()||_()!=="/"&&i(g).startsWith(_())})],V),y(m,b)}),e(f),y(k,f),X(),p()}var za=x('<p class="svelte-1q9bx17"> </p>'),qa=x('<div class="cheat-console-overlay svelte-1q9bx17" role="dialog" aria-modal="true"><div class="console-window svelte-1q9bx17"><div class="console-header svelte-1q9bx17"><h3 class="svelte-1q9bx17">console</h3> <button class="close-btn svelte-1q9bx17">&times;</button></div> <div class="console-output svelte-1q9bx17"></div> <div class="console-input-area svelte-1q9bx17"><span class="svelte-1q9bx17">$</span> <input type="text" class="console-input svelte-1q9bx17" placeholder="명령어를 입력하세요"/></div></div></div>');function La(k,l){Q(l,!1);let c=A(l,"isVisible",8,!1),p=E(""),a=E([]);const r=We();async function h(n){if(!n.trim()){f("❌ 명령어를 입력해주세요.");return}f(`➡️ ${n} 명령어 실행 중...`);try{const v=await pe.get(`/api/cheat?cmd=${n}`);if(v.ok){const b=`✅ '${n}' 치트 실행 성공!`;f(b)}else{const b=await v.text(),$=`❌ '${n}' 치트 실행 실패: ${v.status} - ${b}`;f($)}}catch(v){const b=`⚠️ '${n}' 실행 중 네트워크 오류: ${v.message}`;f(b)}}function g(n){n.key==="Enter"?(n.preventDefault(),h(i(p)),w(p,"")):n.key==="Escape"&&r("close")}function f(n){w(a,[...i(a),n]),setTimeout(()=>{const v=document.querySelector(".console-output");v&&(v.scrollTop=v.scrollHeight)},0)}Ie(()=>{}),J(()=>Fe(c()),()=>{c()}),fe(),Z();var m=He(),d=Le(m);{var _=n=>{var v=qa(),b=s(v),$=s(b),M=o(s($),2);e($);var S=o($,2);ne(S,5,()=>i(a),oe,(D,W)=>{var P=za(),I=s(P,!0);e(P),O(()=>L(I,i(W))),y(D,P)}),e(S);var j=o(S,2),z=o(s(j),2);Ue(z),e(j),e(b),e(v),U("click",M,()=>r("close")),aa(z,()=>i(p),D=>w(p,D)),U("keydown",z,g),y(n,v)};H(d,n=>{c()&&n(_)})}y(k,m),X()}var Ea=x('<div class="nav-bottom-wrapper"><!></div>'),ja=x('<button class="back-btn svelte-1gpa1de"><!></button>'),Da=x('<div class="layout svelte-1gpa1de"><!> <main><!> <!></main> <!> <!> <!> <!> <!></div>');function it(k,l){Q(l,!1);const[c,p]=re(),a=()=>K(je,"$page",c),r=()=>K(ze,"$needMoreNeuronsModal",c),h=E(),g=E();"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(t=>console.log("Service Worker registered:",t),t=>console.error("Service Worker registration failed:",t))});let f=E(!1);{const t=window.matchMedia("(max-width: 768px)");w(f,t.matches),t.addEventListener("change",u=>w(f,u.matches))}let m=E(!1),d=E(!1),_=E(!1);qe(async()=>{if(["/login"].includes(a().url.pathname))return;const t=window.location.hash;if(t.includes("access_token=")){const u=new URLSearchParams(t.substring(1)).get("access_token");if(u){se.set(u),window.history.replaceState(null,"",window.location.pathname+window.location.search);return}}se.set(null),await pe.isLoggedIn()?await Me():console.warn("로그인 정보가 없습니다. 로그인 페이지로 이동합니다.")}),se.subscribe(async t=>{Ve(),t&&ia()}),sa.subscribe(async t=>{if(Ce(se)===null)return;const u=await Me();if(u){let C=u;C.data||(C.data={nickname:C.name,language:t.language,lastLoginAt:"",createdAt:"",hasReceivedFirstCreationReward:!1,lastLoginIP:""});const te={name:C.name,nickname:C.data.nickname||"",language:Ce(ea)||"en",llmType:t.llmType};(await pe.post("/api/user/edit",te)).ok&&console.log("최종 저장완료!")}});function n(){history.length>1?history.back():ca("/hub")}J(()=>(i(f),a()),()=>{w(h,i(f)&&!["/test","/2d","/character","/"].includes(a().url.pathname))}),J(()=>a(),()=>{w(g,["/2d","/character"].includes(a().url.pathname))}),fe(),Z();var v=Da(),b=s(v);{var $=t=>{$a(t,{})};H(b,t=>{i(f)||t($)})}var M=o(b,2);let S;var j=s(M);da(j,l,"default",{});var z=o(j,2);La(z,{get isVisible(){return i(m)},$$events:{close:()=>w(m,!1)}}),e(M);var D=o(M,2);{var W=t=>{var u=Ea(),C=s(u);Ma(C,{}),e(u),Ke(3,u,()=>Qe,()=>({duration:300,axis:"y"})),y(t,u)};H(D,t=>{i(h)&&t(W)})}var P=o(D,2);ra(P,{isNeedNeurons:!0,get isOpen(){return Ze(),r()},set isOpen(t){Xe(ze,t)},$$legacy:!0});var I=o(P,2);na(I,{get isOpen(){return i(d)},$$events:{confirm:async()=>{const t=await ta();la.set(t),w(d,!1),w(_,!0)}}});var R=o(I,2);oa(R,{neuronAmount:200,get isOpen(){return i(_)}});var ee=o(R,2);{var ae=t=>{var u=ja(),C=s(u);T(C,{icon:"weui:back-filled",width:"12",height:"24"}),e(u),U("click",u,n),y(t,u)};H(ee,t=>{["/hub","/"].includes(a().url.pathname)||t(ae)})}e(v),O(t=>S=Y(M,1,"svelte-1gpa1de",null,S,t),[()=>({"no-padding-bottom":i(g)})],V),y(k,v),X(),p()}export{it as component,ot as universal};
