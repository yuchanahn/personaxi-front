import{d as k,b as q}from"../chunks/kz80bbCR.js";import{i as Oe}from"../chunks/2r1cYJse.js";import{w as je,aj as I,z as Ae,ap as u,al as a,O,am as o,Q as e,W as R,as as Re,F as W,V as i,aD as D,aE as $e}from"../chunks/BUDlkbfV.js";import{s as C}from"../chunks/BbnaKca8.js";import{i as j}from"../chunks/28pso2Hb.js";import{k as ze}from"../chunks/B5DqLm-d.js";import{h as Be}from"../chunks/D1MKGDQ_.js";import{a as J}from"../chunks/BwRcvb6q.js";import{s as S,r as K}from"../chunks/BJyhluUY.js";import{e as E}from"../chunks/CiCNsvIE.js";import{t as $,a as oe,f as P}from"../chunks/B2SxtloT.js";import{b as X}from"../chunks/njKOc8Q7.js";import{a as De,s as Te}from"../chunks/D32zTIdM.js";import{g as Ue}from"../chunks/DqiWXVxP.js";import{c as ie}from"../chunks/Ccw7PXcW.js";import{I as ne}from"../chunks/DaDtKPX8.js";import{$ as Ve}from"../chunks/C36u96xB.js";import{s as Fe}from"../chunks/C-VEydUt.js";var Ge=k('<div class="content-box svelte-13sqf71"><h1 class="prompt-title svelte-13sqf71"> </h1> <p class="prompt-subtitle svelte-13sqf71"> </p> <button class="final-button svelte-13sqf71"> </button></div>'),He=k('<div class="content-box svelte-13sqf71"><div class="spinner svelte-13sqf71"></div> <p class="prompt-subtitle svelte-13sqf71"> </p></div>'),Ne=k('<input class="step-input svelte-13sqf71" type="password"/> <input class="step-input svelte-13sqf71" type="password"/>',1),Qe=k('<input class="step-input svelte-13sqf71"/>'),We=k('<div class="gender-selection svelte-13sqf71"><button class="gender-button svelte-13sqf71"><!></button> <button class="gender-button svelte-13sqf71"><!></button> <button class="gender-button svelte-13sqf71"><!></button></div>'),Je=k('<button class="next-button svelte-13sqf71"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-13sqf71"><path d="M5 12h14" class="svelte-13sqf71"></path><path d="m12 5 7 7-7 7" class="svelte-13sqf71"></path></svg></button>'),Ke=k('<div class="svelte-13sqf71"><h1 class="prompt-title svelte-13sqf71"> </h1> <!> <!></div>'),Pe=k('<div class="content-box svelte-13sqf71"><!></div>'),Xe=k('<div class="error-message svelte-13sqf71"> </div>'),Ye=k('<div class="page-wrapper svelte-13sqf71"><div class="flow-container svelte-13sqf71"><a href="/" class="logo-link svelte-13sqf71"><img src="/logo.png" class="logo svelte-13sqf71"/></a> <main class="flow-content svelte-13sqf71"><!></main> <footer class="flow-footer svelte-13sqf71"><!> <div class="extra-links svelte-13sqf71"><span class="svelte-13sqf71"> </span> <a href="/login" class="svelte-13sqf71"> </a></div></footer></div></div>');function Ze(T,le){je(le,!1);const[ve,ce]=Te(),s=()=>De(Ve,"$t",ve),pe='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z"></path><path d="m15 9-6 6"></path><path d="m9 9 6 6"></path></svg>';let n=R("email");const c=R({email:"",password:"",username:"",gender:""});let d=R(""),z=R(""),g=R("");function Y(t){t.focus()}function de(t,l){const{speed:h=40}={},L=t.textContent||"";t.textContent="";let p=0;const m=setInterval(()=>{p<L.length?(t.textContent+=L[p],p++):clearInterval(m)},h);return{destroy(){clearInterval(m)}}}const me={email:s()("register.prompt.email"),username:s()("register.prompt.username"),password:s()("register.prompt.password"),gender:s()("register.prompt.gender")};async function U(){switch(i(g,""),e(n)){case"email":if(!e(d)){i(g,s()("register.error.emailRequired"));return}if(!/^\S+@\S+\.\S+$/.test(e(d))){i(g,s()("register.error.emailInvalid"));return}D(c,e(c).email=e(d)),i(n,"username");break;case"username":if(!e(d)){i(g,s()("register.error.usernameRequired"));return}D(c,e(c).username=e(d)),i(n,"password");break;case"password":if(e(d).length<8){i(g,s()("register.error.passwordLength"));return}if(e(d)!==e(z)){i(g,s()("register.error.passwordMismatch"));return}D(c,e(c).password=e(d)),i(n,"gender");break}i(d,""),i(z,""),await $e();const t=document.querySelector(".step-input");t&&t.focus()}async function V(t){D(c,e(c).gender=t),i(n,"submitting"),await fe()}async function fe(){i(g,"");try{const{data:t,error:l}=await Fe.auth.signUp({email:e(c).email,password:e(c).password,options:{data:{full_name:e(c).username,gender:e(c).gender,name:e(c).username}}});l?(i(g,l.message),i(n,"email")):i(n,"success")}catch{i(g,s()("register.error.network")),i(n,"email")}finally{}}Oe();var F=Ye(),Z=a(F),G=a(Z),ue=a(G);o(G);var H=u(G,2),ge=a(H);{var he=t=>{var l=Ge(),h=a(l),L=a(h);o(h);var p=u(h,2),m=a(p,!0);o(p);var y=u(p,2),A=a(y,!0);o(y),o(l),I((x,M,Q)=>{C(L,`ðŸŽ‰ ${x??""}`),C(m,M),C(A,Q)},[()=>s()("register.success.title"),()=>s()("register.success.message",{values:{email:e(c).email}}),()=>s()("register.success.backToLogin")],O),E("click",y,()=>Ue("/login")),$(1,l,()=>oe,()=>({y:20,duration:400,easing:ie})),q(t,l)},_e=(t,l)=>{{var h=p=>{var m=He(),y=u(a(m),2),A=a(y,!0);o(y),o(m),I(x=>C(A,x),[()=>s()("register.button.loading")],O),$(1,m,()=>P),q(p,m)},L=p=>{var m=Pe(),y=a(m);ze(y,()=>e(n),A=>{var x=Ke(),M=a(x),Q=a(M,!0);o(M),J(M,v=>de?.(v));var ae=u(M,2);{var ke=v=>{var _=Ne(),f=Re(_);K(f),W(()=>X(f,()=>e(d),r=>i(d,r))),J(f,r=>Y?.(r));var b=u(f,2);K(b),I((r,w)=>{S(f,"placeholder",r),S(b,"placeholder",w)},[()=>s()("register.placeholder.password"),()=>s()("register.placeholder.passwordConfirm")],O),X(b,()=>e(z),r=>i(z,r)),E("keydown",b,r=>r.key==="Enter"&&U()),q(v,_)},xe=(v,_)=>{{var f=b=>{var r=Qe();K(r),W(()=>X(r,()=>e(d),w=>i(d,w))),J(r,w=>Y?.(w)),W(()=>E("keydown",r,w=>w.key==="Enter"&&U())),I(w=>{S(r,"type",e(n)==="email"?"email":"text"),S(r,"placeholder",w)},[()=>s()(`register.placeholder.${e(n)}`)],O),q(b,r)};j(v,b=>{e(n)!=="gender"&&b(f)},_)}};j(ae,v=>{e(n)==="password"?v(ke):v(xe,!1)})}var ye=u(ae,2);{var Ie=v=>{var _=We(),f=a(_),b=a(f);ne(b,{icon:"mdi:gender-male",width:"48",height:"48"}),o(f);var r=u(f,2),w=a(r);ne(w,{icon:"mdi:gender-female",width:"48",height:"48"}),o(r);var B=u(r,2),Se=a(B);Be(Se,()=>pe),o(B),o(_),I((Ee,Le,Me)=>{S(f,"title",Ee),S(r,"title",Le),S(B,"title",Me)},[()=>s()("register.gender.male"),()=>s()("register.gender.female"),()=>s()("register.gender.other")],O),E("click",f,()=>V("male")),E("click",r,()=>V("female")),E("click",B,()=>V("other")),q(v,_)},Ce=v=>{var _=Je();E("click",_,U),q(v,_)};j(ye,v=>{e(n)==="gender"?v(Ie):v(Ce,!1)})}o(x),I(()=>C(Q,me[e(n)])),$(1,x,()=>oe,()=>({y:30,duration:400,easing:ie})),$(2,x,()=>P,()=>({duration:150})),q(A,x)}),o(m),q(p,m)};j(t,p=>{e(n)==="submitting"?p(h):p(L,!1)},l)}};j(ge,t=>{e(n)==="success"?t(he):t(_e,!1)})}o(H);var ee=u(H,2),te=a(ee);{var we=t=>{var l=Xe(),h=a(l,!0);o(l),I(()=>C(h,e(g))),$(1,l,()=>P),q(t,l)};j(te,t=>{e(g)&&t(we)})}var se=u(te,2),N=a(se),be=a(N,!0);o(N);var re=u(N,2),qe=a(re,!0);o(re),o(se),o(ee),o(Z),o(F),I((t,l,h)=>{S(ue,"alt",t),C(be,l),C(qe,h)},[()=>s()("login.serviceLogoAlt"),()=>s()("register.alreadyHaveAccount"),()=>s()("register.goToLogin")],O),q(T,F),Ae(),ce()}function _t(T){Ze(T,{})}export{_t as component};
