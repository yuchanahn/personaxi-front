function h(e){const u=e.threshold??10,m=e.maxCloseFrames??30;if(typeof window>"u"||typeof document>"u")return{refresh:()=>{},destroy:()=>{}};const n=window.visualViewport??null;let r=!1;const d=()=>{if(!n)return 0;const t=window.innerHeight-n.height-n.offsetTop;return Math.max(0,t)},s=()=>{const t=d();r||e.setIsKeyboardOpen(t>u),e.setKeyboardHeight(r?0:t>u?t:0)},i=()=>s(),a=t=>{const o=e.inputEl();o&&t.target===o&&(r=!1,e.setIsKeyboardOpen(!0),s())},c=t=>{const o=e.inputEl();if(o&&t.target===o){r=!0,e.setIsKeyboardOpen(!1),e.setKeyboardHeight(0);let f=0;const l=()=>{if(f++,d()<u||f>m){r=!1,e.setKeyboardHeight(0);return}requestAnimationFrame(l)};requestAnimationFrame(l)}};return n?.addEventListener("resize",i,{passive:!0}),n?.addEventListener("scroll",i,{passive:!0}),document.addEventListener("focusin",a,!0),document.addEventListener("focusout",c,!0),s(),{refresh:s,destroy:()=>{n?.removeEventListener("resize",i),n?.removeEventListener("scroll",i),document.removeEventListener("focusin",a,!0),document.removeEventListener("focusout",c,!0)}}}export{h as i};
