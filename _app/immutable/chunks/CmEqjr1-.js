import{d as c,w as o}from"./e6l8DgL1.js";var u=(t=>(t.CHAT="text",t.CHARACTER="2D",t.CHARACTER3D="3D",t.SYSTEM="system",t.SPACE="space",t.LIVE2D="2.5D",t))(u||{});const a=o([]),D=c(a,t=>[...t].sort((s,e)=>{const r=new Date(s.lastMessageAt||s.createdAt).getTime();return new Date(e.lastMessageAt||e.createdAt).getTime()-r})),E=(t,s,e,r)=>{const n={id:t,name:s,createdAt:new Date().toISOString(),type:e,llmType:r||"Error"};a.update(i=>i.some(d=>d.id===n.id)?i:[...i,n])},g=(t,s)=>{a.update(e=>{const r=e.findIndex(n=>n.id===t);return r!==-1&&(e[r]={...e[r],...s}),e})},w=t=>{let s;return a.subscribe(e=>{s=e.find(r=>r.id===t)})(),s};export{u as C,E as a,a as c,w as g,D as s,g as u};
