import{i as x,I as b,G as u,h as k,ai as S,a4 as w,J as t}from"./BUDlkbfV.js";import{l as i}from"./CiCNsvIE.js";function E(e,c,a=c){var v=x();i(e,"input",l=>{var f=l?e.defaultValue:e.value;if(f=_(e)?h(f):f,a(f),v&&f!==(f=c())){var d=e.selectionStart,o=e.selectionEnd;e.value=f??"",o!==null&&(e.selectionStart=d,e.selectionEnd=Math.min(o,e.value.length))}}),(k&&e.defaultValue!==e.value||b(c)==null&&e.value)&&a(_(e)?h(e.value):e.value),u(()=>{var l=c();_(e)&&l===h(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}const n=new Set;function V(e,c,a,v,l=v){var f=a.getAttribute("type")==="checkbox",d=e;let o=!1;if(c!==null)for(var y of c)d=d[y]??=[];d.push(a),i(a,"change",()=>{var r=a.__value;f&&(r=m(d,r,a.checked)),l(r)},()=>l(f?[]:null)),u(()=>{var r=v();if(k&&a.defaultChecked!==a.checked){o=!0;return}f?(r=r||[],a.checked=r.includes(a.__value)):a.checked=S(a.__value,r)}),w(()=>{var r=d.indexOf(a);r!==-1&&d.splice(r,1)}),n.has(d)||(n.add(d),t(()=>{d.sort((r,s)=>r.compareDocumentPosition(s)===4?-1:1),n.delete(d)})),t(()=>{if(o){var r;if(f)r=m(d,r,a.checked);else{var s=d.find(g=>g.checked);r=s?.__value}l(r)}})}function q(e,c,a=c){i(e,"change",v=>{var l=v?e.defaultChecked:e.checked;a(l)}),(k&&e.defaultChecked!==e.checked||b(c)==null)&&a(e.checked),u(()=>{var v=c();e.checked=!!v})}function m(e,c,a){for(var v=new Set,l=0;l<e.length;l+=1)e[l].checked&&v.add(e[l].__value);return a||v.delete(c),Array.from(v)}function _(e){var c=e.type;return c==="number"||c==="range"}function h(e){return e===""?null:+e}export{V as a,E as b,q as c};
