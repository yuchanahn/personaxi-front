import{w as c,g as r}from"./e6l8DgL1.js";import{a as o}from"./E07TNQLR.js";import{c as i,a as l,u as p}from"./CmEqjr1-.js";const d={costs:{chat_2d:5,chat_3d:10,chat_live2d:10,image_generation:10},model_multipliers:{"gemini-flash-lite":1,"gemini-pro":2},purchase_options:[]};function g(){const{subscribe:a,set:s,update:t}=c(d);return{subscribe:a,fetchPricingPolicy:async()=>{try{if(!await o.isLoggedIn())return;const e=await o.get("/api/policy/pricing");if(e.ok){const n=await e.json();s(n)}}catch(e){console.error("Failed to fetch pricing policy, using default:",e)}},getCost:e=>{}}}const u=g();async function h(){const a=await o.get("/api/chat/char/sessions");if(a.ok){const s=await a.json();if(s===null){i.set([]);return}i.set([]);for(const t of s)r(i).find(e=>e.id==t.id)||l(t.id,t.name,t.type,t.llmType||t.llm_type),r(i).find(e=>e.id==t.id)&&p(t.id,{id:t.id,name:t.name,createdAt:t.createdAt||t.created_at,type:t.type,llmType:t.llmType||t.llm_type,avatar:t.avatar,lastMessage:t.lastMessage||t.last_message,lastMessageAt:t.lastMessageAt||t.last_message_at})}}export{h as l,u as p};
