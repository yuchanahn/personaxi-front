@import url("https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.min.css");
@import "tailwindcss";
@plugin "tailwindcss-animate";
@custom-variant dark (&:is(.dark *));

body {
    font-family: "Pretendard", -apple-system, BlinkMacSystemFont, sans-serif;
}

@font-face {
    font-family: "Cal Sans";
    font-style: normal;
    font-weight: 600;
    font-display: swap;
    src: url("/CalSans-SemiBold.woff2") format("woff2");
}

@keyframes gradient-animation {
    0% {
        background-position: 0% 50%;
    }

    50% {
        background-position: 100% 50%;
    }

    100% {
        background-position: 0% 50%;
    }
}

.bg-primary-animated {
    background: var(--primary-gradient);
    background-size: 200% 200%;
    animation: gradient-animation 3s ease infinite;
}

/* ==============================
   LIGHT THEME (Revamped)
   ============================== */
:root {
    /* Core Background Colors - Clean neutral base */
    --background: hsl(220 18% 96.5%);
    --foreground: hsl(222 18% 12%);
    --card: hsl(0 0% 100%);
    --card-foreground: var(--foreground);
    --popover: hsl(220 18% 99%);
    --popover-foreground: var(--foreground);

    /* Primary Colors - Modern violet-pink, less "candy" */
    --primary: hsl(270 85% 52%);
    --primary-gradient: linear-gradient(135deg, #8b5cf6, #a855f7, #ec4899);
    --primary-hover: hsl(270 85% 56%);
    --primary-foreground: hsl(0 0% 100%);

    /* Accent & Secondary - subtle surfaces */
    --accent: hsl(220 16% 92.5%);
    --secondary: hsl(220 16% 94%);
    --accent-foreground: hsl(222 16% 18%);
    --accent-hover: hsl(220 18% 91%);
    --ring: hsl(270 90% 60%);
    --secondary-foreground: hsl(222 14% 28%);
    --secondary-hover: hsl(220 16% 93%);

    /* Muted Elements */
    --muted: hsl(220 16% 95%);
    --muted-foreground: hsl(222 10% 44%);
    --muted-hover: hsl(220 16% 92%);

    /* Interactive States */
    --destructive: hsl(0 80% 52%);
    --destructive-foreground: hsl(0 0% 100%);
    --destructive-hover: hsl(0 80% 56%);
    --success: hsl(142 65% 40%);
    --success-foreground: hsl(0 0% 100%);
    --warning: hsl(45 95% 45%);
    --warning-foreground: hsl(0 0% 100%);

    /* Borders & Inputs */
    --border: hsl(220 14% 84%);
    --border-hover: hsl(220 14% 78%);
    --input: hsl(220 16% 93%);
    --input-hover: hsl(220 16% 93%);
    --input-focus: hsl(220 16% 90%);

    /* Shadows - light theme needs crisp but not heavy */
    --shadow-mini: 0 1px 2px 0 hsla(222, 16%, 10%, 0.06);
    --shadow-sm: 0 2px 6px -2px hsla(222, 16%, 10%, 0.10), 0 1px 2px -1px hsla(222, 16%, 10%, 0.06);
    --shadow-card: 0 14px 28px -22px hsla(222, 16%, 10%, 0.28),
        0 8px 18px -14px hsla(222, 16%, 10%, 0.14);
    --shadow-popover: 0 18px 44px -24px hsla(222, 16%, 10%, 0.28), 0 10px 22px -16px hsla(222, 16%, 10%, 0.14);
    --shadow-dialog: 0 28px 64px -34px hsla(222, 16%, 10%, 0.34), 0 14px 28px -22px hsla(222, 16%, 10%, 0.18);

    /* Glass Effect Variables */
    --glass-bg: hsla(220, 18%, 100%, 0.72);
    --glass-border: hsla(220, 14%, 82%, 0.55);
    --glass-shadow: 0 18px 54px hsla(222, 16%, 10%, 0.10);

    /* Text Hierarchy */
    --foreground-alt: hsl(222 12% 30%);
    --text-primary: var(--foreground);
    --text-secondary: hsl(222 10% 40%);
    --text-tertiary: hsl(222 9% 52%);
    --text-placeholder: hsl(222 9% 60%);

    /* Radius Scale */
    --radius-xs: 4px;
    --radius-sm: 6px;
    --radius-md: 10px;
    --radius-lg: 14px;
    --radius-xl: 18px;
    --radius-card: var(--radius-lg);
    --radius-input: var(--radius-md);
    --radius-button: var(--radius-md);

    /* Transitions */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-normal: 250ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);

    /* Spacing Scale */
    --space-xs: 4px;
    --space-sm: 8px;
    --space-md: 12px;
    --space-lg: 16px;
    --space-xl: 24px;
    --space-2xl: 32px;

    /* Typography */
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;

    /* Component Specific */
    --border-card: var(--border);
    --border-input: var(--border);
    --scrollbar-thumb: hsl(220 10% 78%);
    --scrollbar-track: hsl(220 18% 96%);

    /* Selection Colors (NO yellow) */
    --selection-bg: hsla(270, 85%, 52%, 0.16);
    --selection-text: var(--foreground);

    /* Legacy compatibility */
    --color-bg: var(--background);
    --color-surface: var(--card);
    --color-accent: var(--accent);
    --color-text: var(--foreground);
    --color-secondary-text: var(--muted-foreground);
    --color-border: var(--border);

    /* 기타(기존 참조 유지) */
    --dark: hsl(210 20% 12%);
    --dark-10: hsl(210 20% 12%);
    --dark-40: hsl(210 20% 12%);
    --white: hsl(0 0% 100%);

    /* 이 값들은 theme inline에서 참조하는데 원본에 없던 것도 있어서 안전하게 정의 */
    --background-alt: hsl(220 16% 96%);
    --dark-04: hsla(210, 20%, 12%, 0.04);
    --tertiary: hsl(220 14% 92%);
    --line: hsl(220 14% 88%);
    --contrast: hsl(222 20% 12%);
    --shadow-mini-inset: inset 0 1px 0 hsla(0, 0%, 100%, 0.6);
    --shadow-kbd: 0 1px 0 hsla(222, 16%, 10%, 0.12);
    --shadow-btn: 0 8px 18px -14px hsla(222, 16%, 10%, 0.30);
    --shadow-date-field-focus: 0 0 0 4px hsla(270, 90%, 60%, 0.20);
}

/* Light scrollbar */
:root ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

:root ::-webkit-scrollbar-track {
    background: var(--scrollbar-track);
    border-radius: var(--radius-sm);
}

:root ::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb);
    border-radius: var(--radius-sm);
    transition: background var(--transition-fast);
}

:root ::-webkit-scrollbar-thumb:hover {
    background: hsl(220 10% 70%);
}

:root ::selection {
    background: var(--selection-bg);
    color: var(--selection-text);
}

:root *:focus-visible {
    outline: 2px solid var(--ring);
    outline-offset: 2px;
}

/* Light component presets (match dark richness) */
:root .glass {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    box-shadow: var(--glass-shadow);
}

:root .btn-primary {
    background: var(--primary-gradient);
    color: var(--primary-foreground);

    /* 기존 border:none 때문에 경계가 죽을 수 있음 */
    border: 1px solid hsla(222, 16%, 10%, 0.10);

    /* 그림자도 조금 더 “경계형”으로: 바깥 + 얇은 라인 */
    box-shadow:
        0 1px 0 hsla(0, 0%, 100%, 0.70) inset,
        0 0 0 1px hsla(222, 16%, 10%, 0.06),
        var(--shadow-sm);

    transition: transform var(--transition-fast), box-shadow var(--transition-fast), filter var(--transition-fast);
}

:root .btn-primary:hover {
    transform: translateY(-1px);
    box-shadow:
        0 1px 0 hsla(0, 0%, 100%, 0.65) inset,
        0 0 0 1px hsla(222, 16%, 10%, 0.10),
        var(--shadow-card);
    filter: saturate(1.05) brightness(1.03);
}


:root .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-card);
    box-shadow: var(--shadow-card);
    transition: transform var(--transition-normal), box-shadow var(--transition-normal), border-color var(--transition-normal);
}

:root .card:hover {
    border-color: var(--border-hover);
    box-shadow: var(--shadow-popover);
    transform: translateY(-2px);
}

/* ==============================
   DARK THEME (Keep & align)
   ============================== */
[data-theme="dark"] {
    /* Core Background Colors - Warm Charcoal Base */
    --background: hsl(220 8% 8%);
    --foreground: hsl(220 12% 95%);
    --card: hsl(220 10% 12%);
    --card-foreground: var(--foreground);
    --popover: hsl(220 12% 14%);
    --popover-foreground: var(--foreground);

    /* Primary Colors - Sophisticated Purple-Pink Gradient */
    --primary: hsl(285, 75%, 68%);
    --primary-gradient: linear-gradient(135deg, #e879f9, #c084fc, #a855f7);
    --primary-hover: hsl(285, 75%, 72%);
    --primary-foreground: hsl(285, 30%, 15%);

    /* Accent & Secondary - Neutral Warm Tones */
    --accent: hsl(220 15% 22%);
    --accent-foreground: hsl(220 20% 88%);
    --accent-hover: hsl(220 15% 26%);
    --ring: hsl(285 85% 72%);
    --secondary: hsl(220 12% 16%);
    --secondary-foreground: hsl(220 15% 78%);
    --secondary-hover: hsl(220 12% 20%);

    /* Muted Elements - Subtle Contrast */
    --muted: hsl(220 10% 18%);
    --muted-foreground: hsl(220 12% 65%);
    --muted-hover: hsl(220 10% 22%);

    /* Interactive States */
    --destructive: hsl(0, 75%, 65%);
    --destructive-foreground: hsl(0, 0%, 100%);
    --destructive-hover: hsl(0, 75%, 68%);
    --success: hsl(142, 70%, 55%);
    --success-foreground: hsl(142, 30%, 15%);
    --warning: hsl(45, 85%, 60%);
    --warning-foreground: hsl(45, 30%, 15%);

    /* Borders & Inputs - Subtle Definition */
    --border: hsl(220, 15%, 20%);
    --border-hover: hsl(220, 20%, 28%);
    --input: hsl(220, 12%, 18%);
    --input-hover: hsl(220, 12%, 22%);
    --input-focus: hsl(220, 15%, 25%);

    /* Enhanced Shadows - Depth & Elegance */
    --shadow-mini: 0 1px 3px 0 hsla(0, 0%, 0%, 0.12), 0 1px 2px 0 hsla(0, 0%, 0%, 0.08);
    --shadow-sm: 0 2px 4px -1px hsla(0, 0%, 0%, 0.15), 0 1px 2px -1px hsla(0, 0%, 0%, 0.1);
    --shadow-card:
        0 0 0 1px hsla(222, 16%, 10%, 0.06),
        0 14px 28px -22px hsla(222, 16%, 10%, 0.26),
        0 8px 18px -14px hsla(222, 16%, 10%, 0.14);
    --shadow-popover: 0 12px 24px -4px hsla(0, 0%, 0%, 0.25), 0 4px 8px -2px hsla(0, 0%, 0%, 0.1);
    --shadow-dialog: 0 20px 40px -8px hsla(0, 0%, 0%, 0.35), 0 8px 16px -4px hsla(0, 0%, 0%, 0.15);

    /* Glass Effect Variables */
    --glass-bg: hsla(220, 12%, 15%, 0.8);
    --glass-border: hsla(220, 25%, 25%, 0.3);
    --glass-shadow: 0 8px 32px hsla(0, 0%, 0%, 0.2);

    /* Text Hierarchy */
    --foreground-alt: hsl(220 12% 82%);
    --text-primary: var(--foreground);
    --text-secondary: hsl(220 12% 72%);
    --text-tertiary: hsl(220 12% 58%);
    --text-placeholder: hsl(220 12% 48%);

    /* Legacy Compatibility */
    --color-bg: var(--background);
    --color-surface: var(--card);
    --color-accent: var(--accent);
    --color-text: var(--foreground);
    --color-secondary-text: var(--muted-foreground);
    --color-border: var(--border);

    /* Enhanced Border Radius - Modern Feel */
    --radius-xs: 4px;
    --radius-sm: 6px;
    --radius-md: 8px;
    --radius-lg: 12px;
    --radius-xl: 16px;
    --radius-card: var(--radius-lg);
    --radius-input: var(--radius-sm);
    --radius-button: var(--radius-sm);

    /* Transitions - Smooth Interactions */
    --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-normal: 250ms cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);

    /* Spacing Scale */
    --space-xs: 4px;
    --space-sm: 8px;
    --space-md: 12px;
    --space-lg: 16px;
    --space-xl: 24px;
    --space-2xl: 32px;

    /* Typography Enhancements */
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    --font-weight-bold: 700;

    /* Component Specific */
    --border-card: var(--border);
    --border-input: var(--border);
    --scrollbar-thumb: hsl(220, 15%, 25%);
    --scrollbar-track: hsl(220, 10%, 12%);

    /* Selection Colors */
    --selection-bg: hsla(285, 75%, 68%, 0.2);
    --selection-text: var(--foreground);

    /* Keep extra compat vars */
    --background-alt: hsl(220 10% 10%);
    --dark-04: hsla(220, 8%, 8%, 0.04);
    --tertiary: hsl(220 12% 16%);
    --line: hsl(220 15% 20%);
    --contrast: hsl(220 12% 95%);
    --shadow-mini-inset: inset 0 1px 0 hsla(0, 0%, 100%, 0.06);
    --shadow-kbd: 0 1px 0 hsla(0, 0%, 0%, 0.35);
    --shadow-btn: 0 10px 22px -18px hsla(0, 0%, 0%, 0.65);
    --shadow-date-field-focus: 0 0 0 4px hsla(285, 85%, 72%, 0.22);
}

[data-theme="dark"] ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

[data-theme="dark"] ::-webkit-scrollbar-track {
    background: var(--scrollbar-track);
    border-radius: var(--radius-sm);
}

[data-theme="dark"] ::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb);
    border-radius: var(--radius-sm);
    transition: background var(--transition-fast);
}

[data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
    background: hsl(220, 20%, 35%);
}

[data-theme="dark"] ::selection {
    background: var(--selection-bg);
    color: var(--selection-text);
}

[data-theme="dark"] *:focus-visible {
    outline: 2px solid var(--ring);
    outline-offset: 2px;
}

[data-theme="dark"] .glass {
    background: var(--glass-bg);
    border: 1px solid var(--glass-border);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    box-shadow: var(--glass-shadow);
}

[data-theme="dark"] .btn-primary {
    background: var(--primary-gradient);
    color: var(--primary-foreground);
    border: none;
    transition: all var(--transition-fast);
    box-shadow: var(--shadow-sm);
}

[data-theme="dark"] .btn-primary:hover {
    transform: translateY(-1px);
    box-shadow: var(--shadow-card);
    filter: brightness(1.1);
}

[data-theme="dark"] .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-card);
    box-shadow: var(--shadow-card);
    transition: all var(--transition-normal);
}

[data-theme="dark"] .card:hover {
    border-color: var(--border-hover);
    box-shadow: var(--shadow-popover);
    transform: translateY(-2px);
}

/* ==============================
   Theme Inline (Tailwind v4 tokens)
   ============================== */
@theme inline {
    --color-background: var(--background);
    --color-background-alt: var(--background-alt);
    --color-foreground: var(--foreground);
    --color-foreground-alt: var(--foreground-alt);
    --color-muted: var(--muted);
    --color-muted-foreground: var(--muted-foreground);
    --color-border: var(--border-card);
    --color-border-input: var(--border-input);
    --color-border-input-hover: var(--border-input-hover);
    --color-border-card: var(--border-card);
    --color-dark: var(--dark);
    --color-dark-10: var(--dark-10);
    --color-dark-40: var(--dark-40);
    --color-dark-04: var(--dark-04);
    --color-accent: var(--accent);
    --color-accent-foreground: var(--accent-foreground);
    --color-destructive: var(--destructive);
    --color-tertiary: var(--tertiary);
    --color-line: var(--line);
    --color-contrast: var(--contrast);

    --shadow-mini: var(--shadow-mini);
    --shadow-mini-inset: var(--shadow-mini-inset);
    --shadow-popover: var(--shadow-popover);
    --shadow-kbd: var(--shadow-kbd);
    --shadow-btn: var(--shadow-btn);
    --shadow-card: var(--shadow-card);
    --shadow-date-field-focus: var(--shadow-date-field-focus);

    --text-xxs: 10px;

    --radius-card: 16px;
    --radius-card-lg: 20px;
    --radius-card-sm: 10px;
    --radius-input: 9px;
    --radius-button: 5px;
    --radius-5px: 5px;
    --radius-9px: 9px;
    --radius-10px: 10px;
    --radius-15px: 15px;

    --spacing-input: 3rem;
    --spacing-input-sm: 2.5rem;

    --breakpoint-desktop: 1440px;

    --animate-accordion-down: accordion-down 0.2s ease-out;
    --animate-accordion-up: accordion-up 0.2s ease-out;
    --animate-caret-blink: caret-blink 1s ease-out infinite;
    --animate-scale-in: scale-in 0.2s ease;
    --animate-scale-out: scale-out 0.15s ease;
    --animate-fade-in: fade-in 0.2s ease;
    --animate-fade-out: fade-out 0.15s ease;
    --animate-enter-from-left: enter-from-left 0.2s ease;
    --animate-enter-from-right: enter-from-right 0.2s ease;
    --animate-exit-to-left: exit-to-left 0.2s ease;
    --animate-exit-to-right: exit-to-right 0.2s ease;

    --font-sans: "Inter", "sans-serif";
    --font-mono: "Source Code Pro", "monospace";
    --font-alt: "Courier", "sans-serif";
    --font-display: "Cal Sans", "sans-serif";

    @keyframes accordion-down {
        from {
            height: 0;
        }

        to {
            height: var(--bits-accordion-content-height);
        }
    }

    @keyframes accordion-up {
        from {
            height: var(--bits-accordion-content-height);
        }

        to {
            height: 0;
        }
    }

    @keyframes caret-blink {

        0%,
        70%,
        100% {
            opacity: 1;
        }

        20%,
        50% {
            opacity: 0;
        }
    }

    @keyframes enter-from-right {
        from {
            opacity: 0;
            transform: translateX(200px);
        }

        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes enter-from-left {
        from {
            opacity: 0;
            transform: translateX(-200px);
        }

        to {
            opacity: 1;
            transform: translateX(0);
        }
    }

    @keyframes exit-to-right {
        from {
            opacity: 1;
            transform: translateX(0);
        }

        to {
            opacity: 0;
            transform: translateX(200px);
        }
    }

    @keyframes exit-to-left {
        from {
            opacity: 1;
            transform: translateX(0);
        }

        to {
            opacity: 0;
            transform: translateX(-200px);
        }
    }

    @keyframes scale-in {
        from {
            opacity: 0;
            transform: rotateX(-10deg) scale(0.9);
        }

        to {
            opacity: 1;
            transform: rotateX(0deg) scale(1);
        }
    }

    @keyframes scale-out {
        from {
            opacity: 1;
            transform: rotateX(0deg) scale(1);
        }

        to {
            opacity: 0;
            transform: rotateX(-10deg) scale(0.95);
        }
    }

    @keyframes fade-in {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }

    @keyframes fade-out {
        from {
            opacity: 1;
        }

        to {
            opacity: 0;
        }
    }
}

@layer base {

    *,
    ::after,
    ::before,
    ::backdrop,
    ::file-selector-button {
        border-color: var(--color-border-card, currentColor);
    }

    * {
        @apply border-border;
    }

    html {
        -webkit-text-size-adjust: 100%;
        font-variation-settings: normal;
        scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
    }

    body {
        @apply bg-background text-foreground;
        font-feature-settings: "rlig" 1, "calt" 1;
    }

    /* selection is handled per-theme above (no yellow) */
}

@layer components {
    *:not(body):not(.focus-override) {
        outline: none !important;

        &:focus-visible {
            @apply focus-visible:ring-foreground focus-visible:ring-offset-background focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-offset-1;
        }
    }

    .link {
        @apply hover:text-foreground/80 focus-visible:ring-foreground focus-visible:ring-offset-background rounded-xs focus-visible:outline-hidden inline-flex items-center gap-1 font-medium underline underline-offset-4 focus-visible:ring-2 focus-visible:ring-offset-2;
    }
}

@layer utilities {
    .no-scrollbar::-webkit-scrollbar {
        display: none;
    }

    .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
}